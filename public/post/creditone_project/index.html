<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Credit One Project | Home</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="#import required packages from sqlalchemy import create_engine import pymysql import pandas as pd import numpy as np Obtain Data The CreditOne data is on the MySQL sever, so I need to connect to the server, query the database for the data, get the data (formatted as dataframe), and finally export the data as a .csv file.
Even though it&rsquo;s not necessary, I prefer to export the raw data as a .">
    <meta name="generator" content="Hugo 0.82.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="https://katherinepiatti.com/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      

    

    
    
    <meta property="og:title" content="Credit One Project" />
<meta property="og:description" content="#import required packages from sqlalchemy import create_engine import pymysql import pandas as pd import numpy as np Obtain Data The CreditOne data is on the MySQL sever, so I need to connect to the server, query the database for the data, get the data (formatted as dataframe), and finally export the data as a .csv file.
Even though it&rsquo;s not necessary, I prefer to export the raw data as a ." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://katherinepiatti.com/post/creditone_project/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-12-13T11:00:59-04:00" />
<meta property="article:modified_time" content="2020-12-13T11:00:59-04:00" /><meta property="og:site_name" content="Home" />

<meta itemprop="name" content="Credit One Project">
<meta itemprop="description" content="#import required packages from sqlalchemy import create_engine import pymysql import pandas as pd import numpy as np Obtain Data The CreditOne data is on the MySQL sever, so I need to connect to the server, query the database for the data, get the data (formatted as dataframe), and finally export the data as a .csv file.
Even though it&rsquo;s not necessary, I prefer to export the raw data as a ."><meta itemprop="datePublished" content="2020-12-13T11:00:59-04:00" />
<meta itemprop="dateModified" content="2020-12-13T11:00:59-04:00" />
<meta itemprop="wordCount" content="8658">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Credit One Project"/>
<meta name="twitter:description" content="#import required packages from sqlalchemy import create_engine import pymysql import pandas as pd import numpy as np Obtain Data The CreditOne data is on the MySQL sever, so I need to connect to the server, query the database for the data, get the data (formatted as dataframe), and finally export the data as a .csv file.
Even though it&rsquo;s not necessary, I prefer to export the raw data as a ."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://katherinepiatti.com/images/credit_feature.jpg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://katherinepiatti.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        <img src="https://katherinepiatti.com/images/diamond2.gif" class="w100 mw5-ns" alt="Home" />
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/post/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/resume_contact/" title="Resume | Contact page">
              Resume | Contact
            </a>
          </li>
          
        </ul>
      
      


<a href="https://stackoverflow.com/users/14364020/katherine" target="_blank" class="link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel="noopener" aria-label="follow on Stack Overflow——Opens in a new window">
  <svg height="32px" 
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    width="32px"
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






<a href="https://linkedin.com/kpiatti" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/kpiatti" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Credit One Project</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://katherinepiatti.com/post/creditone_project/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://katherinepiatti.com/post/creditone_project/&amp;text=Credit%20One%20Project" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://katherinepiatti.com/post/creditone_project/&amp;title=Credit%20One%20Project" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Credit One Project</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-12-13T11:00:59-04:00">December 13, 2020</time>

      
      
        <span class="f6 mv4 dib tracked"> - 41 minutes read</span>
        <span class="f6 mv4 dib tracked"> - 8658 words</span>
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import required packages</span>
<span style="color:#f92672">from</span> sqlalchemy <span style="color:#f92672">import</span> create_engine
<span style="color:#f92672">import</span> pymysql
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
</code></pre></div><h2 id="obtain-data"><em>Obtain Data</em></h2>
<p>The CreditOne data is on the MySQL sever, so I need to connect to the server, query the database for the data, get the data (formatted as dataframe), and finally export the data as a .csv file.</p>
<p>Even though it&rsquo;s not necessary, I prefer to export the raw data as a .csv before doing any processing/wrangling. This way I have a untouched copy of data that I can use for comparisons and verification.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#connect python to MySQL server (database?)</span>
db_connection_str <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;mysql+pymysql://deepanalytics:Sqltask1234!@34.73.222.197/deepanalytics&#39;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create engine for SQLalchemy to interface with the database API (see notes below)</span>
db_connection <span style="color:#f92672">=</span> create_engine(db_connection_str)

<span style="color:#75715e">#query the credit one data and extract it into a pd df</span>
sql_query <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_sql(<span style="color:#e6db74">&#39;SELECT * FROM credit&#39;</span>, con<span style="color:#f92672">=</span>db_connection)

<span style="color:#75715e">#create pandas df from SQL query</span>
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>DataFrame(sql_query)
</code></pre></div><p><em>Coding Note</em></p>
<ul>
<li>Initially missed the <code>db_connection = create_engine(db_connection_str)</code> command. Resulted in a <code>nameerror: 'db_connection' not defined</code>. I removed the _str from the first line, re-ran the cell, and was able to successfully execute the query. So I&rsquo;m unsure why (or if) the <code>create_engine()</code> command is needed. (See my SQL collection in Zotero).</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#verify data was properly extracted</span>
df<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>

    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of   MyUnknownColumn         X1      X2          X3        X4   X5     X6     X7  \
    <span style="color:#ae81ff">0</span>              ID  LIMIT_BAL     SEX   EDUCATION  MARRIAGE  AGE  PAY_0  PAY_2   
    <span style="color:#ae81ff">1</span>               <span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">20000</span>  female  university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">24</span>      <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">2</span>               <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">120000</span>  female  university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">26</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">3</span>               <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">90000</span>  female  university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">34</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">4</span>               <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">50000</span>  female  university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">37</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   

          X8     X9  <span style="color:#f92672">...</span>        X15        X16        X17       X18       X19  \
    <span style="color:#ae81ff">0</span>  PAY_3  PAY_4  <span style="color:#f92672">...</span>  BILL_AMT4  BILL_AMT5  BILL_AMT6  PAY_AMT1  PAY_AMT2   
    <span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  <span style="color:#f92672">...</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">689</span>   
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">3272</span>       <span style="color:#ae81ff">3455</span>       <span style="color:#ae81ff">3261</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">14331</span>      <span style="color:#ae81ff">14948</span>      <span style="color:#ae81ff">15549</span>      <span style="color:#ae81ff">1518</span>      <span style="color:#ae81ff">1500</span>   
    <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">28314</span>      <span style="color:#ae81ff">28959</span>      <span style="color:#ae81ff">29547</span>      <span style="color:#ae81ff">2000</span>      <span style="color:#ae81ff">2019</span>   

            X20       X21       X22       X23                           Y  
    <span style="color:#ae81ff">0</span>  PAY_AMT3  PAY_AMT4  PAY_AMT5  PAY_AMT6  default payment next month  
    <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>                     default  
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">1000</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">2000</span>                     default  
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">5000</span>                 <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">1200</span>      <span style="color:#ae81ff">1100</span>      <span style="color:#ae81ff">1069</span>      <span style="color:#ae81ff">1000</span>                 <span style="color:#f92672">not</span> default  

    [<span style="color:#ae81ff">5</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><ul>
<li><em>Data Source</em> — academic paper found <a href="https://bradzzz.gitbooks.io/ga-seattle-dsi/content/dsi/dsi_05_classification_databases/2.1-lesson/assets/datasets/DefaultCreditCardClients_yeh_2009.pdf">here</a></li>
<li><em>Dats Supplement</em> — for variable definitions see creditone_data_info.pdf (<a href="https://katherinepiatti.com/folder/creditone_data_info1.pdf">here</a>).</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get info about df variables</span>
df<span style="color:#f92672">.</span>info()
<span style="color:#f92672">---</span>
    <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">class</span> <span style="color:#960050;background-color:#1e0010">&#39;</span><span style="color:#a6e22e">pandas</span><span style="color:#f92672">.</span>core<span style="color:#f92672">.</span>frame<span style="color:#f92672">.</span>DataFrame<span style="color:#e6db74">&#39;&gt;</span>
    RangeIndex: <span style="color:#ae81ff">30204</span> entries, <span style="color:#ae81ff">0</span> to <span style="color:#ae81ff">30203</span>
    Data columns (total <span style="color:#ae81ff">25</span> columns):
     <span style="color:#75715e">#   Column           Non-Null Count  Dtype</span>
    <span style="color:#f92672">---</span>  <span style="color:#f92672">------</span>           <span style="color:#f92672">--------------</span>  <span style="color:#f92672">-----</span>
     <span style="color:#ae81ff">0</span>   MyUnknownColumn  <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">1</span>   X1               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">2</span>   X2               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">3</span>   X3               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">4</span>   X4               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">5</span>   X5               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">6</span>   X6               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">7</span>   X7               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">8</span>   X8               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">9</span>   X9               <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">10</span>  X10              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">11</span>  X11              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">12</span>  X12              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">13</span>  X13              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">14</span>  X14              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">15</span>  X15              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">16</span>  X16              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">17</span>  X17              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">18</span>  X18              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">19</span>  X19              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">20</span>  X20              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">21</span>  X21              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">22</span>  X22              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">23</span>  X23              <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
     <span style="color:#ae81ff">24</span>  Y                <span style="color:#ae81ff">30204</span> non<span style="color:#f92672">-</span>null  object
    dtypes: object(<span style="color:#ae81ff">25</span>)
    memory usage: <span style="color:#ae81ff">5.8</span><span style="color:#f92672">+</span> MB
</code></pre></div><h3 id="export-raw-data-as-csv"><em>Export Raw Data As .csv</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#export df as .csv file</span>
df<span style="color:#f92672">.</span>to_csv (<span style="color:#e6db74">&#39;raw_creditone_data.csv&#39;</span>, index <span style="color:#f92672">=</span> False)
</code></pre></div><h1 id="data-wrangling">Data Wrangling</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import exported csv file with raw data</span>
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;raw_credit_one_data.csv&#39;</span>)

<span style="color:#75715e">#verify imported data looks as expected</span>
df<span style="color:#f92672">.</span>head()

<span style="color:#75715e"># number of rows and columns in df as benchmark before making any changes</span>
df<span style="color:#f92672">.</span>shape
<span style="color:#f92672">---</span>
    (<span style="color:#ae81ff">30204</span>, <span style="color:#ae81ff">25</span>)
</code></pre></div><p><em>Data Stats</em></p>
<ul>
<li>23 features/independent variables</li>
<li>1 dependent variable</li>
<li>1 ID column</li>
<li>30,204 rows</li>
</ul>
<h3 id="change-column-headings"><em>Change Column Headings</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#change column headings to values in index (row) 0</span>
df<span style="color:#f92672">.</span>columns <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>iloc[<span style="color:#ae81ff">0</span>]

<span style="color:#75715e">#verify change was successful</span>
df<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>
    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of <span style="color:#ae81ff">0</span>  ID  LIMIT_BAL     SEX   EDUCATION  MARRIAGE  AGE  PAY_0  PAY_2  PAY_3  \
    <span style="color:#ae81ff">0</span>  ID  LIMIT_BAL     SEX   EDUCATION  MARRIAGE  AGE  PAY_0  PAY_2  PAY_3   
    <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">20000</span>  female  university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">24</span>      <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   
    <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">120000</span>  female  university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">26</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">90000</span>  female  university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">34</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">50000</span>  female  university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">37</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   

    <span style="color:#ae81ff">0</span>  PAY_4  <span style="color:#f92672">...</span>  BILL_AMT4  BILL_AMT5  BILL_AMT6  PAY_AMT1  PAY_AMT2  PAY_AMT3  \
    <span style="color:#ae81ff">0</span>  PAY_4  <span style="color:#f92672">...</span>  BILL_AMT4  BILL_AMT5  BILL_AMT6  PAY_AMT1  PAY_AMT2  PAY_AMT3   
    <span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  <span style="color:#f92672">...</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span>          <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">689</span>         <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">3272</span>       <span style="color:#ae81ff">3455</span>       <span style="color:#ae81ff">3261</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">14331</span>      <span style="color:#ae81ff">14948</span>      <span style="color:#ae81ff">15549</span>      <span style="color:#ae81ff">1518</span>      <span style="color:#ae81ff">1500</span>      <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">28314</span>      <span style="color:#ae81ff">28959</span>      <span style="color:#ae81ff">29547</span>      <span style="color:#ae81ff">2000</span>      <span style="color:#ae81ff">2019</span>      <span style="color:#ae81ff">1200</span>   

    <span style="color:#ae81ff">0</span>  PAY_AMT4  PAY_AMT5  PAY_AMT6  default payment next month  
    <span style="color:#ae81ff">0</span>  PAY_AMT4  PAY_AMT5  PAY_AMT6  default payment next month  
    <span style="color:#ae81ff">1</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>                     default  
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">1000</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">2000</span>                     default  
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">5000</span>                 <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">1100</span>      <span style="color:#ae81ff">1069</span>      <span style="color:#ae81ff">1000</span>                 <span style="color:#f92672">not</span> default  


    [<span style="color:#ae81ff">5</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><p><em>Coding Notes</em></p>
<ul>
<li>See <a href="https://stackoverflow.com/questions/26147180/convert-row-to-column-header-for-pandas-dataframe">Stack Overflow</a> for more info.</li>
<li><code>df.iloc[pd.RangeIndex(len(df)).drop(0)]</code> is for situations where df either doesn&rsquo;t have or you don&rsquo;t know if it has <strong>unique index numbers</strong> for each row. Otherwise use <code>df.drop(df.index[0])</code>.</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#drop row 0 that contains column headings</span>
df<span style="color:#f92672">.</span>drop(df<span style="color:#f92672">.</span>index[<span style="color:#ae81ff">0</span>], inplace <span style="color:#f92672">=</span> True)

<span style="color:#75715e">#verify df is -1 row</span>
len(df)

<span style="color:#75715e">#verify column headings row was dropped</span>
df<span style="color:#f92672">.</span>head()
</code></pre></div><h3 id="remove-duplicate-data"><em>Remove Duplicate Data</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#find and print all duplicate rows in the df</span>
duplicate_rows <span style="color:#f92672">=</span> df[df<span style="color:#f92672">.</span>duplicated()]
<span style="color:#66d9ef">print</span>(duplicate_rows)
<span style="color:#f92672">---</span>

    <span style="color:#ae81ff">0</span>     ID LIMIT_BAL     SEX        EDUCATION MARRIAGE AGE PAY_0 PAY_2 PAY_3  \
    <span style="color:#ae81ff">204</span>    <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">20000</span>  female       university        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">24</span>     <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   
    <span style="color:#ae81ff">205</span>    <span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">120000</span>  female       university        <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">26</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">206</span>    <span style="color:#ae81ff">3</span>     <span style="color:#ae81ff">90000</span>  female       university        <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">34</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">207</span>    <span style="color:#ae81ff">4</span>     <span style="color:#ae81ff">50000</span>  female       university        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">37</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">208</span>    <span style="color:#ae81ff">5</span>     <span style="color:#ae81ff">50000</span>    male       university        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">57</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">0</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   
    <span style="color:#f92672">..</span>   <span style="color:#f92672">...</span>       <span style="color:#f92672">...</span>     <span style="color:#f92672">...</span>              <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>  <span style="color:#f92672">..</span>   <span style="color:#f92672">...</span>   <span style="color:#f92672">...</span>   <span style="color:#f92672">...</span>   
    <span style="color:#ae81ff">400</span>  <span style="color:#ae81ff">197</span>    <span style="color:#ae81ff">150000</span>  female       university        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">34</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">401</span>  <span style="color:#ae81ff">198</span>     <span style="color:#ae81ff">20000</span>  female  graduate school        <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">22</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">402</span>  <span style="color:#ae81ff">199</span>    <span style="color:#ae81ff">500000</span>  female  graduate school        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">34</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">403</span>  <span style="color:#ae81ff">200</span>     <span style="color:#ae81ff">30000</span>  female      high school        <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">22</span>     <span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">404</span>  <span style="color:#ae81ff">201</span>    <span style="color:#ae81ff">180000</span>  female  graduate school        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">38</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>   

    <span style="color:#ae81ff">0</span>   PAY_4  <span style="color:#f92672">...</span> BILL_AMT4 BILL_AMT5 BILL_AMT6 PAY_AMT1 PAY_AMT2 PAY_AMT3  \
    <span style="color:#ae81ff">204</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  <span style="color:#f92672">...</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">689</span>        <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">205</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">3272</span>      <span style="color:#ae81ff">3455</span>      <span style="color:#ae81ff">3261</span>        <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">1000</span>     <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">206</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>     <span style="color:#ae81ff">14331</span>     <span style="color:#ae81ff">14948</span>     <span style="color:#ae81ff">15549</span>     <span style="color:#ae81ff">1518</span>     <span style="color:#ae81ff">1500</span>     <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">207</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>     <span style="color:#ae81ff">28314</span>     <span style="color:#ae81ff">28959</span>     <span style="color:#ae81ff">29547</span>     <span style="color:#ae81ff">2000</span>     <span style="color:#ae81ff">2019</span>     <span style="color:#ae81ff">1200</span>   
    <span style="color:#ae81ff">208</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>     <span style="color:#ae81ff">20940</span>     <span style="color:#ae81ff">19146</span>     <span style="color:#ae81ff">19131</span>     <span style="color:#ae81ff">2000</span>    <span style="color:#ae81ff">36681</span>    <span style="color:#ae81ff">10000</span>   
    <span style="color:#f92672">..</span>    <span style="color:#f92672">...</span>  <span style="color:#f92672">...</span>       <span style="color:#f92672">...</span>       <span style="color:#f92672">...</span>       <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>   
    <span style="color:#ae81ff">400</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">116</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">1500</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">116</span>   
    <span style="color:#ae81ff">401</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">8332</span>     <span style="color:#ae81ff">18868</span>     <span style="color:#ae81ff">19247</span>     <span style="color:#ae81ff">1500</span>     <span style="color:#ae81ff">1032</span>      <span style="color:#ae81ff">541</span>   
    <span style="color:#ae81ff">402</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  <span style="color:#f92672">...</span>      <span style="color:#ae81ff">1251</span>      <span style="color:#ae81ff">1206</span>      <span style="color:#ae81ff">1151</span>      <span style="color:#ae81ff">138</span>     <span style="color:#ae81ff">2299</span>     <span style="color:#ae81ff">1251</span>   
    <span style="color:#ae81ff">403</span>     <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span>     <span style="color:#ae81ff">29836</span>      <span style="color:#ae81ff">1630</span>         <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">1000</span>       <span style="color:#ae81ff">85</span>     <span style="color:#ae81ff">1714</span>   
    <span style="color:#ae81ff">404</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>  <span style="color:#f92672">...</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>   

    <span style="color:#ae81ff">0</span>   PAY_AMT4 PAY_AMT5 PAY_AMT6 default payment next month  
    <span style="color:#ae81ff">204</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>                    default  
    <span style="color:#ae81ff">205</span>     <span style="color:#ae81ff">1000</span>        <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">2000</span>                    default  
    <span style="color:#ae81ff">206</span>     <span style="color:#ae81ff">1000</span>     <span style="color:#ae81ff">1000</span>     <span style="color:#ae81ff">5000</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">207</span>     <span style="color:#ae81ff">1100</span>     <span style="color:#ae81ff">1069</span>     <span style="color:#ae81ff">1000</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">208</span>     <span style="color:#ae81ff">9000</span>      <span style="color:#ae81ff">689</span>      <span style="color:#ae81ff">679</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#f92672">..</span>       <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>      <span style="color:#f92672">...</span>                        <span style="color:#f92672">...</span>  
    <span style="color:#ae81ff">400</span>        <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">1500</span>        <span style="color:#ae81ff">0</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">401</span>    <span style="color:#ae81ff">20000</span>      <span style="color:#ae81ff">693</span>     <span style="color:#ae81ff">1000</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">402</span>     <span style="color:#ae81ff">1206</span>     <span style="color:#ae81ff">1151</span>    <span style="color:#ae81ff">15816</span>                <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">403</span>      <span style="color:#ae81ff">104</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>                    default  
    <span style="color:#ae81ff">404</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>                <span style="color:#f92672">not</span> default  

    [<span style="color:#ae81ff">201</span> rows x <span style="color:#ae81ff">25</span> columns]
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#drop duplicate rows from the df</span>
df<span style="color:#f92672">.</span>drop_duplicates(inplace <span style="color:#f92672">=</span> True)  <span style="color:#75715e">#inplace=True is to make change to df permanent</span>

<span style="color:#75715e">#verify rows were dropped</span>
len(df)
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">30002</span>
</code></pre></div><h3 id="handle-missing-values"><em>Handle Missing Values</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#check for missing values</span>
<span style="color:#66d9ef">print</span>(df<span style="color:#f92672">.</span>isnull()<span style="color:#f92672">.</span>sum())
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>
    ID                            <span style="color:#ae81ff">1</span>
    LIMIT_BAL                     <span style="color:#ae81ff">0</span>
    SEX                           <span style="color:#ae81ff">0</span>
    EDUCATION                     <span style="color:#ae81ff">0</span>
    MARRIAGE                      <span style="color:#ae81ff">0</span>
    AGE                           <span style="color:#ae81ff">0</span>
    PAY_0                         <span style="color:#ae81ff">0</span>
    PAY_2                         <span style="color:#ae81ff">0</span>
    PAY_3                         <span style="color:#ae81ff">0</span>
    PAY_4                         <span style="color:#ae81ff">0</span>
    PAY_5                         <span style="color:#ae81ff">0</span>
    PAY_6                         <span style="color:#ae81ff">0</span>
    BILL_AMT1                     <span style="color:#ae81ff">0</span>
    BILL_AMT2                     <span style="color:#ae81ff">0</span>
    BILL_AMT3                     <span style="color:#ae81ff">0</span>
    BILL_AMT4                     <span style="color:#ae81ff">0</span>
    BILL_AMT5                     <span style="color:#ae81ff">0</span>
    BILL_AMT6                     <span style="color:#ae81ff">0</span>
    PAY_AMT1                      <span style="color:#ae81ff">0</span>
    PAY_AMT2                      <span style="color:#ae81ff">0</span>
    PAY_AMT3                      <span style="color:#ae81ff">0</span>
    PAY_AMT4                      <span style="color:#ae81ff">0</span>
    PAY_AMT5                      <span style="color:#ae81ff">0</span>
    PAY_AMT6                      <span style="color:#ae81ff">0</span>
    default payment next month    <span style="color:#ae81ff">0</span>
    dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#drop the row with missing ID</span>
df<span style="color:#f92672">.</span>dropna(inplace<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#verify 1 row dropped</span>
len(df)
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">30001</span>
</code></pre></div><h3 id="invalid-data"><em>Invalid Data</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#locate rows 201-206 (not inclusive)</span>
df<span style="color:#f92672">.</span>loc[<span style="color:#ae81ff">201</span>:<span style="color:#ae81ff">206</span>]

<span style="color:#75715e">#drop row 203 containing original column headings</span>
df<span style="color:#f92672">.</span>drop(<span style="color:#ae81ff">203</span>, inplace<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#get number of rows in df</span>
len(df)
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">30000</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#only row 201 should appear b/c others were dropped above</span>
df<span style="color:#f92672">.</span>loc[<span style="color:#ae81ff">201</span>:<span style="color:#ae81ff">210</span>]<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>
    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of <span style="color:#ae81ff">0</span>     ID LIMIT_BAL     SEX        EDUCATION MARRIAGE AGE PAY_0 PAY_2 PAY_3  \
    <span style="color:#ae81ff">201</span>  <span style="color:#ae81ff">201</span>    <span style="color:#ae81ff">180000</span>  female  graduate school        <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">38</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>   

    <span style="color:#ae81ff">0</span>   PAY_4  <span style="color:#f92672">...</span> BILL_AMT4 BILL_AMT5 BILL_AMT6 PAY_AMT1 PAY_AMT2 PAY_AMT3  \
    <span style="color:#ae81ff">201</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>  <span style="color:#f92672">...</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>   

    <span style="color:#ae81ff">0</span>   PAY_AMT4 PAY_AMT5 PAY_AMT6 default payment next month  
    <span style="color:#ae81ff">201</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>                <span style="color:#f92672">not</span> default  

    [<span style="color:#ae81ff">1</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><p><em>Coding Notes</em></p>
<ul>
<li>Dropping rows doesn&rsquo;t stick unless you add <code>inplace = True</code> parameter to command. Read <a href="https://stackabuse.com/python-with-pandas-dataframe-tutorial-with-examples/">this</a> to understand why parameter is needed.</li>
<li>After dropping index, that index number is dropped from the df (e.g. if you drop index 0, when you use df.head() the first entry will be index 1). In other words, the data from below does not move up and fill the dropped indices as it would in an Excel file..</li>
</ul>
<h3 id="change-variable-data-types"><em>Change Variable Data Types</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#look at data types for each variable</span>
df<span style="color:#f92672">.</span>dtypes
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>
    ID                            object
    LIMIT_BAL                     object
    SEX                           object
    EDUCATION                     object
    MARRIAGE                      object
    AGE                           object
    PAY_0                         object
    PAY_2                         object
    PAY_3                         object
    PAY_4                         object
    PAY_5                         object
    PAY_6                         object
    BILL_AMT1                     object
    BILL_AMT2                     object
    BILL_AMT3                     object
    BILL_AMT4                     object
    BILL_AMT5                     object
    BILL_AMT6                     object
    PAY_AMT1                      object
    PAY_AMT2                      object
    PAY_AMT3                      object
    PAY_AMT4                      object
    PAY_AMT5                      object
    PAY_AMT6                      object
    default payment next month    object
    dtype: object
</code></pre></div><h3 id="continuous-variables"><em>Continuous Variables</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>LIMIT_BAL<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">50000</span>      <span style="color:#ae81ff">3365</span>
    <span style="color:#ae81ff">20000</span>      <span style="color:#ae81ff">1976</span>
    <span style="color:#ae81ff">30000</span>      <span style="color:#ae81ff">1610</span>
    <span style="color:#ae81ff">80000</span>      <span style="color:#ae81ff">1567</span>
    <span style="color:#ae81ff">200000</span>     <span style="color:#ae81ff">1528</span>
               <span style="color:#f92672">...</span>
    <span style="color:#ae81ff">740000</span>        <span style="color:#ae81ff">2</span>
    <span style="color:#ae81ff">690000</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">327680</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">760000</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">1000000</span>       <span style="color:#ae81ff">1</span>
    Name: LIMIT_BAL, Length: <span style="color:#ae81ff">81</span>, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#change data type of LIMIT_BAL var from object to int</span>
df[<span style="color:#e6db74">&#34;LIMIT_BAL&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of AGE var from object to int</span>
df[<span style="color:#e6db74">&#34;AGE&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;AGE&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get number of obs for each value in PAY_0</span>
df<span style="color:#f92672">.</span>PAY_0<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">14737</span>
    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#ae81ff">5686</span>
    <span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">3688</span>
    <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">2759</span>
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2667</span>
    <span style="color:#ae81ff">3</span>       <span style="color:#ae81ff">322</span>
    <span style="color:#ae81ff">4</span>        <span style="color:#ae81ff">76</span>
    <span style="color:#ae81ff">5</span>        <span style="color:#ae81ff">26</span>
    <span style="color:#ae81ff">8</span>        <span style="color:#ae81ff">19</span>
    <span style="color:#ae81ff">6</span>        <span style="color:#ae81ff">11</span>
    <span style="color:#ae81ff">7</span>         <span style="color:#ae81ff">9</span>
    Name: PAY_0, dtype: int64
</code></pre></div><p>It turns out the values in this variable represent if and how long an account has been delinquent. It is probably better treated as a categorical variable.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get number of obs for each value in BILL_AM1</span>
df<span style="color:#f92672">.</span>BILL_AMT1<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">2008</span>
    <span style="color:#ae81ff">390</span>        <span style="color:#ae81ff">244</span>
    <span style="color:#ae81ff">780</span>         <span style="color:#ae81ff">76</span>
    <span style="color:#ae81ff">326</span>         <span style="color:#ae81ff">72</span>
    <span style="color:#ae81ff">316</span>         <span style="color:#ae81ff">63</span>
              <span style="color:#f92672">...</span>
    <span style="color:#ae81ff">216</span>          <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">192727</span>       <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">4434</span>         <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">38579</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">96644</span>        <span style="color:#ae81ff">1</span>
    Name: BILL_AMT1, Length: <span style="color:#ae81ff">22723</span>, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#change data type of BILL_AMT1 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT1&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT1&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of BILL_AMT2 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT2&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT2&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of BILL_AMT3 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT3&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT3&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of BILL_AMT4 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT4&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT4&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of BILL_AMT5 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT5&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT5&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of BILL_AMT6 var from object to int</span>
df[<span style="color:#e6db74">&#34;BILL_AMT6&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;BILL_AMT6&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>PAY_AMT4<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">6408</span>
    <span style="color:#ae81ff">1000</span>     <span style="color:#ae81ff">1394</span>
    <span style="color:#ae81ff">2000</span>     <span style="color:#ae81ff">1214</span>
    <span style="color:#ae81ff">3000</span>      <span style="color:#ae81ff">887</span>
    <span style="color:#ae81ff">5000</span>      <span style="color:#ae81ff">810</span>
             <span style="color:#f92672">...</span>
    <span style="color:#ae81ff">12164</span>       <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">17133</span>       <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">2466</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">3187</span>        <span style="color:#ae81ff">1</span>
    <span style="color:#ae81ff">3859</span>        <span style="color:#ae81ff">1</span>
    Name: PAY_AMT4, Length: <span style="color:#ae81ff">6937</span>, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#change data type of PAY_AMT1 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT1&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT1&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of PAY_AMT2 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT2&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT2&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of PAY_AMT3 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT3&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT3&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of PAY_AMT4 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT4&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT4&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of PAY_AMT5 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT5&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT5&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#change data type of PAY_AMT6 var from object to int</span>
df[<span style="color:#e6db74">&#34;PAY_AMT6&#34;</span>] <span style="color:#f92672">=</span> df[<span style="color:#e6db74">&#39;PAY_AMT6&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;int&#39;</span>)

<span style="color:#75715e">#rename default payment next month column</span>
df<span style="color:#f92672">.</span>rename(columns<span style="color:#f92672">=</span>{<span style="color:#e6db74">&#34;default payment next month&#34;</span>: <span style="color:#e6db74">&#34;DEFAULT&#34;</span>}, inplace <span style="color:#f92672">=</span> True)

<span style="color:#75715e">#verify change</span>
df<span style="color:#f92672">.</span>dtypes
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">0</span>
    ID           object
    LIMIT_BAL     int32
    SEX          object
    EDUCATION    object
    MARRIAGE     object
    AGE           int32
    PAY_0        object
    PAY_2        object
    PAY_3        object
    PAY_4        object
    PAY_5        object
    PAY_6        object
    BILL_AMT1     int32
    BILL_AMT2     int32
    BILL_AMT3     int32
    BILL_AMT4     int32
    BILL_AMT5     int32
    BILL_AMT6     int32
    PAY_AMT1      int32
    PAY_AMT2      int32
    PAY_AMT3      int32
    PAY_AMT4      int32
    PAY_AMT5      int32
    PAY_AMT6      int32
    DEFAULT      object
    dtype: object
</code></pre></div><h3 id="categorical-variables">Categorical Variables</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get counts of male and female customers in df</span>
df<span style="color:#f92672">.</span>SEX<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    female    <span style="color:#ae81ff">18112</span>
    male      <span style="color:#ae81ff">11888</span>
    Name: SEX, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get counts for education categories</span>
df<span style="color:#f92672">.</span>EDUCATION<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    university         <span style="color:#ae81ff">14030</span>
    graduate school    <span style="color:#ae81ff">10585</span>
    high school         <span style="color:#ae81ff">4917</span>
    other                <span style="color:#ae81ff">468</span>
    Name: EDUCATION, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get counts for marriage categories</span>
df<span style="color:#f92672">.</span>MARRIAGE<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">15964</span>
    <span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">13659</span>
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">323</span>
    <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">54</span>
    Name: MARRIAGE, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># get counts for the target var, i.e. DEFAULT</span>
df<span style="color:#f92672">.</span>DEFAULT<span style="color:#f92672">.</span>value_counts()
<span style="color:#f92672">---</span>
    <span style="color:#f92672">not</span> default    <span style="color:#ae81ff">23364</span>
    default         <span style="color:#ae81ff">6636</span>
    Name: DEFAULT, dtype: int64
</code></pre></div><h3 id="rename-features"><em>Rename Features</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#rename PAY features to convey month</span>
df<span style="color:#f92672">.</span>rename(columns <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;PAY_0&#39;</span>: <span style="color:#e6db74">&#39;pay_s&#39;</span>, <span style="color:#e6db74">&#39;PAY_2&#39;</span>:<span style="color:#e6db74">&#39;pay_ag&#39;</span>, <span style="color:#e6db74">&#39;PAY_3&#39;</span>:<span style="color:#e6db74">&#39;pay_jy&#39;</span>,<span style="color:#e6db74">&#39;PAY_4&#39;</span>:<span style="color:#e6db74">&#39;pay_ju&#39;</span>, <span style="color:#e6db74">&#39;PAY_5&#39;</span>:<span style="color:#e6db74">&#39;pay_m&#39;</span>, <span style="color:#e6db74">&#39;PAY_6&#39;</span>:<span style="color:#e6db74">&#39;pay_ap&#39;</span>}, inplace <span style="color:#f92672">=</span> True)

<span style="color:#75715e">#rename BILL_AMT features to convey month</span>
df<span style="color:#f92672">.</span>rename(columns <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;BILL_AMT1&#39;</span>: <span style="color:#e6db74">&#39;bill_s&#39;</span>, <span style="color:#e6db74">&#39;BILL_AMT2&#39;</span>:<span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;BILL_AMT3&#39;</span>:<span style="color:#e6db74">&#39;bill_jy&#39;</span>,<span style="color:#e6db74">&#39;BILL_AMT4&#39;</span>:<span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;BILL_AMT5&#39;</span>:<span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;BILL_AMT6&#39;</span>:<span style="color:#e6db74">&#39;bill_ap&#39;</span>}, inplace <span style="color:#f92672">=</span> True)

<span style="color:#75715e">#rename PAY_AMT features to convey month</span>
df<span style="color:#f92672">.</span>rename(columns <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#39;PAY_AMT1&#39;</span>: <span style="color:#e6db74">&#39;pmt_s&#39;</span>, <span style="color:#e6db74">&#39;PAY_AMT2&#39;</span>:<span style="color:#e6db74">&#39;pmt_ag&#39;</span>, <span style="color:#e6db74">&#39;PAY_AMT3&#39;</span>:<span style="color:#e6db74">&#39;pmt_jy&#39;</span>,<span style="color:#e6db74">&#39;PAY_AMT4&#39;</span>:<span style="color:#e6db74">&#39;pmt_ju&#39;</span>, <span style="color:#e6db74">&#39;PAY_AMT5&#39;</span>:<span style="color:#e6db74">&#39;pmt_m&#39;</span>, <span style="color:#e6db74">&#39;PAY_AMT6&#39;</span>:<span style="color:#e6db74">&#39;pmt_ap&#39;</span>}, inplace <span style="color:#f92672">=</span> True)

<span style="color:#75715e">#verify features were renamed</span>
df<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>

    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of <span style="color:#ae81ff">0</span> ID  LIMIT_BAL     SEX   EDUCATION MARRIAGE  AGE pay_s pay_ag pay_jy pay_ju  \
    <span style="color:#ae81ff">1</span>  <span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">20000</span>  female  university        <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">24</span>     <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   
    <span style="color:#ae81ff">2</span>  <span style="color:#ae81ff">2</span>     <span style="color:#ae81ff">120000</span>  female  university        <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">26</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">3</span>  <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">90000</span>  female  university        <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">34</span>     <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">4</span>  <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">50000</span>  female  university        <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">37</span>     <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">5</span>  <span style="color:#ae81ff">5</span>      <span style="color:#ae81ff">50000</span>    male  university        <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">57</span>    <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">0</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">0</span>   

    <span style="color:#ae81ff">0</span>  <span style="color:#f92672">...</span> bill_ju bill_m  bill_ap  pmt_s  pmt_ag  pmt_jy  pmt_ju  pmt_m  pmt_ap  \
    <span style="color:#ae81ff">1</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">689</span>       <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">2</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">3272</span>   <span style="color:#ae81ff">3455</span>     <span style="color:#ae81ff">3261</span>      <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">2000</span>   
    <span style="color:#ae81ff">3</span>  <span style="color:#f92672">...</span>   <span style="color:#ae81ff">14331</span>  <span style="color:#ae81ff">14948</span>    <span style="color:#ae81ff">15549</span>   <span style="color:#ae81ff">1518</span>    <span style="color:#ae81ff">1500</span>    <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">1000</span>   <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">5000</span>   
    <span style="color:#ae81ff">4</span>  <span style="color:#f92672">...</span>   <span style="color:#ae81ff">28314</span>  <span style="color:#ae81ff">28959</span>    <span style="color:#ae81ff">29547</span>   <span style="color:#ae81ff">2000</span>    <span style="color:#ae81ff">2019</span>    <span style="color:#ae81ff">1200</span>    <span style="color:#ae81ff">1100</span>   <span style="color:#ae81ff">1069</span>    <span style="color:#ae81ff">1000</span>   
    <span style="color:#ae81ff">5</span>  <span style="color:#f92672">...</span>   <span style="color:#ae81ff">20940</span>  <span style="color:#ae81ff">19146</span>    <span style="color:#ae81ff">19131</span>   <span style="color:#ae81ff">2000</span>   <span style="color:#ae81ff">36681</span>   <span style="color:#ae81ff">10000</span>    <span style="color:#ae81ff">9000</span>    <span style="color:#ae81ff">689</span>     <span style="color:#ae81ff">679</span>   

    <span style="color:#ae81ff">0</span>      DEFAULT  
    <span style="color:#ae81ff">1</span>      default  
    <span style="color:#ae81ff">2</span>      default  
    <span style="color:#ae81ff">3</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">4</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">5</span>  <span style="color:#f92672">not</span> default  

    [<span style="color:#ae81ff">5</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="reorder-features"><em>Reorder Features</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#define function to move/re-order columns (code lifted from towarddatascience)</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">movecol</span>(df, cols_to_move<span style="color:#f92672">=</span>[], ref_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span>, place<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;After&#39;</span>):

    cols <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>columns<span style="color:#f92672">.</span>tolist()
    <span style="color:#66d9ef">if</span> place <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;After&#39;</span>:
        seg1 <span style="color:#f92672">=</span> cols[:list(cols)<span style="color:#f92672">.</span>index(ref_col) <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>]
        seg2 <span style="color:#f92672">=</span> cols_to_move
    <span style="color:#66d9ef">if</span> place <span style="color:#f92672">==</span> <span style="color:#e6db74">&#39;Before&#39;</span>:
        seg1 <span style="color:#f92672">=</span> cols[:list(cols)<span style="color:#f92672">.</span>index(ref_col)]
        seg2 <span style="color:#f92672">=</span> cols_to_move <span style="color:#f92672">+</span> [ref_col]

    seg1 <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> seg1 <span style="color:#66d9ef">if</span> i <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> seg2]
    seg3 <span style="color:#f92672">=</span> [i <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> cols <span style="color:#66d9ef">if</span> i <span style="color:#f92672">not</span> <span style="color:#f92672">in</span> seg1 <span style="color:#f92672">+</span> seg2]

    <span style="color:#66d9ef">return</span>(df[seg1 <span style="color:#f92672">+</span> seg2 <span style="color:#f92672">+</span> seg3])
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#move LIMIT_BAL column next to other account/credit variables</span>
df <span style="color:#f92672">=</span> movecol(df,
             cols_to_move<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>],
             ref_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;AGE&#39;</span>,
             place<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;After&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#re-order pay columns</span>
df <span style="color:#f92672">=</span> movecol(df,
             cols_to_move<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;pay_ap&#39;</span>, <span style="color:#e6db74">&#39;pay_m&#39;</span>, <span style="color:#e6db74">&#39;pay_ju&#39;</span>, <span style="color:#e6db74">&#39;pay_jy&#39;</span>, <span style="color:#e6db74">&#39;pay_ag&#39;</span>, <span style="color:#e6db74">&#39;pay_s&#39;</span>],
             ref_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>,
             place<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;After&#39;</span>)

<span style="color:#75715e">#re-order pmt columns</span>
df <span style="color:#f92672">=</span> movecol(df,
             cols_to_move<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;pmt_ap&#39;</span>, <span style="color:#e6db74">&#39;pmt_m&#39;</span>, <span style="color:#e6db74">&#39;pmt_ju&#39;</span>, <span style="color:#e6db74">&#39;pmt_jy&#39;</span>, <span style="color:#e6db74">&#39;pmt_ag&#39;</span>, <span style="color:#e6db74">&#39;pmt_s&#39;</span>],
             ref_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>,
             place<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;After&#39;</span>)

<span style="color:#75715e">#re-order bill columns</span>
df <span style="color:#f92672">=</span> movecol(df,
             cols_to_move<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>],
             ref_col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>,
             place<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;After&#39;</span>)
</code></pre></div><h3 id="export-cleaned-data"><em>Export Cleaned Data</em></h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#export cleaned transformed data as .csv file</span>
df<span style="color:#f92672">.</span>to_csv(<span style="color:#e6db74">&#39;cleaned_creditone_data.csv&#39;</span>, index <span style="color:#f92672">=</span> False, header<span style="color:#f92672">=</span>True)
</code></pre></div><h1 id="exploratory-data-analysis-eda">Exploratory Data Analysis (EDA)</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import packages</span>
<span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#f92672">import</span> seaborn <span style="color:#f92672">as</span> sns
plt<span style="color:#f92672">.</span>style<span style="color:#f92672">.</span>use(<span style="color:#e6db74">&#39;fivethirtyeight&#39;</span>)
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np

<span style="color:#f92672">from</span> pandas_profiling <span style="color:#f92672">import</span> ProfileReport
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import cleaned data</span>
df <span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;cleaned_transformed_credit_one_data.csv&#39;</span>)

<span style="color:#75715e">#verify imported data looks as expected</span>
df<span style="color:#f92672">.</span>head()
</code></pre></div><ul>
<li>Cleaned data Dimensions: 30,000 obervations &amp; 25 variables</li>
</ul>
<h2 id="variable-info">Variable Info</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get variable data types</span>
df<span style="color:#f92672">.</span>dtypes
<span style="color:#f92672">---</span>
    ID            int64
    SEX          object
    EDUCATION    object
    MARRIAGE      int64
    AGE           int64
    LIMIT_BAL     int64
    bill_ap       int64
    bill_m        int64
    bill_ju       int64
    bill_jy       int64
    bill_ag       int64
    bill_s        int64
    pmt_ap        int64
    pmt_m         int64
    pmt_ju        int64
    pmt_jy        int64
    pmt_ag        int64
    pmt_s         int64
    pay_ap        int64
    pay_m         int64
    pay_ju        int64
    pay_jy        int64
    pay_ag        int64
    pay_s         int64
    DEFAULT      object
    dtype: object
</code></pre></div><ol>
<li>
<p>Demographic Variables</p>
<ul>
<li>Sex—categorical, 2 levels: male, female</li>
<li>Education— ordinal, 6 levels?</li>
<li>Marital Status - categorical, 4 levels</li>
<li>Age- continuous</li>
</ul>
</li>
<li>
<p>Account Variables</p>
<ul>
<li>ID- customer ID- unique number assigned to each observation in dataset (exclude from analysis)</li>
<li>Balance Limit - continuous</li>
<li>Default Status - categorical 2 level</li>
<li>Repayment Status in April  - categorical, 9+ levels</li>
<li>Repayment Status in May</li>
<li>Repayment Status in June</li>
<li>Repayment Status in July</li>
<li>Repayment Status in August</li>
<li>Repayment Status in September</li>
</ul>
</li>
<li>
<p>Billing Variables</p>
<ul>
<li>April bill amount - continuous</li>
<li>May bill amount</li>
<li>June bill amount</li>
<li>July Bill amount</li>
<li>August bill amount</li>
<li>September bill amount</li>
</ul>
</li>
<li>
<p>Payment Variables</p>
<ul>
<li>April Payment amount- continuous</li>
<li>May Payment Amount</li>
<li>June Payment Amount</li>
<li>July Payment Amount</li>
<li>August Payment Amount</li>
<li>September Payment Amount</li>
</ul>
</li>
</ol>
<ul>
<li>Target Features
<ul>
<li>Balance Limit- if we are trying to predict how much credit customers should be extended.</li>
<li>Default- if we are trying to predict which customers are most likely to dafault on their loans.</li>
</ul>
</li>
</ul>
<h1 id="univarite-analysis">Univarite Analysis</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create in-line minimal pandas profile report</span>
<span style="color:#75715e">#ProfileReport(df, minimal=True)</span>

<span style="color:#75715e">#profile = ProfileReport(df, title=&#39;Clean CreditOne Pandas Profiling Report&#39;, explorative = True)</span>
</code></pre></div><p><em>Coding Notes</em></p>
<ul>
<li>The full pandas profile report took a <em>very long time to generate</em> and was <em>too big</em> to load without crashing my browser.</li>
<li>Two options to generate profile reports more quickly:
<ul>
<li>Generate a minimal report (which does not include correlations between vars) by adding a &lsquo;minimal=True&rsquo; parameter to ProfileReport command.</li>
<li>Generate a report for only a <em>sample</em> of df by substituting <code>df.sample(n=10000)</code> for df in the command.</li>
</ul>
</li>
<li>To output the report as a separate html file use:  <code>prof = ProfileReport(df) prof.to_file(output_file='output.html')</code></li>
</ul>
<h2 id="demographic-variables">Demographic Variables</h2>
<p><em>Observations (based on profile report)</em></p>
<ul>
<li>Sex
<ul>
<li>60.4% female, 39.6% male</li>
</ul>
</li>
<li>Education
<ul>
<li>HS 16.4%, University 46.8%, Graduate School 35.3%, Other 1.6%</li>
<li>Compared to US population, sample has a lot of customers with university and graduate school degrees, and a small number with high school degrees.</li>
<li>May consider combining university and graduate school categories later.</li>
</ul>
</li>
<li>Marital Status
<ul>
<li>Married (1) 45.5%, Single (2) 53.6%, Divorced (3) 1.1%, Other 0.2%</li>
</ul>
</li>
<li>Age
<ul>
<li>Range 21 - 79.</li>
<li>Mean 35, Median 34</li>
<li>Consider binnning: young, middle age, 65+</li>
</ul>
</li>
</ul>
<h2 id="account-variables">Account Variables</h2>
<p><em>Observations (based on profile report)</em></p>
<ul>
<li>
<p><em><strong>Credit/Balance Limit</strong></em> (target for model predicting amount of credit to give customers)</p>
<ul>
<li>Continuous variable, range - 10k to 1 million</li>
<li>Only 81 distinct values (consider 8 bins)</li>
<li>Mean: 167,484</li>
<li>Distribution significantly skewed toward low end</li>
<li>Mode: 50k limit (11.2%)</li>
<li>Only 1 customer with 1 million limit</li>
<li>Potential problem: this variable represents the amount of credit given to the customer, including both the individual consumer credit and &ldquo;his/her family (supplemental) credit&rdquo;. I&rsquo;m not exactly sure what family credit is, but it may be an amount of credit extended to a family group that the customer can use because he/she is part of the family. This potentially muddies the waters because  we don&rsquo;t know how much of the credit limit was given to the customer as an individual vs. how much of the credit limit they were given as a member of a family. At the very least this means, at best the model will be able to accurately predict the amount of individual and family credit each customer should be given.</li>
</ul>
</li>
<li>
<p><em><strong>Default</strong></em> (target for model predicting which customers are likely to default)</p>
<ul>
<li>Not defult 77.9%, default 22.1%</li>
<li>Do I need to use special techniques |when trying to model/predict extremely unlikely events?</li>
</ul>
</li>
<li>
<p>Repayment Variables</p>
<ul>
<li>-2 = no use, -1 = paid in full, 0 = use revolving credit, 1 = payment delay 1 month, 2 = payment delay 2 months, &hellip;, 9 = payment delay 9+ months</li>
<li>All repayment variables have roughly same distribution and characteristics: over 50% zeros, significantly more -2 &amp; -1 values than values greater than or equal to 1</li>
</ul>
</li>
</ul>
<h2 id="billing-variables">Billing Variables</h2>
<p><em>Observations (from profile report)</em></p>
<ul>
<li>All billing variables have negative minimum values. If valid data points, it perhaps CreditOne is overcharging customers and having to issue credits.</li>
<li>Distributions for all billing variables look roughly the same.
<ul>
<li>Very significant left skew.</li>
<li>Lots of zeros.</li>
<li>All months contain a small number of negative values. Don&rsquo;t know how to interpret.
<ul>
<li>◘ Consider removing or transforming negative values to improve model performance.</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter out the rows where the value for at least one of the billing vars is less than zero at least one of the bill</span>
df<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;bill_ap &lt; 0 or bill_m &lt; 0 or bill_ju &lt; 0 or bill_jy &lt; 0 or bill_ag or bill_s &lt; 0&#39;</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>I first tried doing the filter using the ``.loc()``` function, but all my attempts threw errors.</li>
<li><code>df.loc[ df[['bill_ap', 'bill_m', 'bill_ju', 'bill_jy', 'bill_ag', 'bill_s']]&lt;0]</code>Threw a ValueError: cannot index with multidimensional key.</li>
<li><code>df[['bill_ap', 'bill_m', 'bill_ju', 'bill_jy', 'bill_ag', 'bill_s']].loc[lambda x: x&lt;0]</code> same error as above.</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter out the rows where the value for all the billing vars is less than zero</span>
df<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;bill_ap &lt; 0 &amp; bill_m &lt; 0 &amp; bill_ju &lt; 0 &amp; bill_jy &lt; 0 &amp; bill_ag &amp; bill_s &lt; 0&#39;</span>)

<span style="color:#75715e">#sort df by april bill amount from highest to lowest, then show first 10 rows</span>
df<span style="color:#f92672">.</span>sort_values(by<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;bill_ap&#39;</span>], ascending<span style="color:#f92672">=</span>False)<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">10</span>)
</code></pre></div><p><em>Observations</em></p>
<ul>
<li>Suspicious data point:some customers have bill amounts that exceed their balance limits. Does that mean credit one is not enforcing those limits?
<ul>
<li>Maybe I should engineer a feature that is true iff the the customer&rsquo;s bill amount is ever bigger than their balance limit.</li>
</ul>
</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#calculate median values for all billing variables</span>
df[ [<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>]]<span style="color:#f92672">.</span>median()

<span style="color:#75715e">#calculate mean absolute deviation (MAD) for all billing vars</span>
df[ [<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>]]<span style="color:#f92672">.</span>mad()

<span style="color:#75715e">#calculate descriptive stats for all billing variables</span>
df[ [<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>]]<span style="color:#f92672">.</span>describe()
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>The median, mad, and describe stats are included in profile report. I was just practicing and testing if I could generate stats on a <em>list of vars</em> (rather than one at a time).</li>
</ul>
</blockquote>
<h2 id="payment-variables">Payment Variables</h2>
<ul>
<li>There are 6 continuous payment variables - each represents the amount the customer paid towards their bill for the months of April to September 2005.</li>
</ul>
<p><em>Observations (based on profile report)</em></p>
<ul>
<li>The distributions of the payment and billing variables have similar shapes.</li>
<li>Notable Differences:
<ul>
<li>The payment variables contain a higher percentage of zero values.</li>
<li>The number and spread of positive values when it comes to the payment variables (which makes sense if customers are using revolving credit and/or not paying their bill.</li>
<li>The payment variables don&rsquo;t contain any negative values.</li>
</ul>
</li>
</ul>
<h1 id="relationships-between-features-ivs">Relationships Between Features (IVs)</h1>
<p>In this section, I will examine whether any of the features (independent variables) are related to one another in a significant way. If any of the features  are highly correlated, that may be because they are actually tracking/representing the same information. Since high corfelation between depedent variables can harm ML models, it needs to be handled.</p>
<h2 id="are-billing-variables-correlated-with-each-other">Are billing variables correlated with each other?</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#calculate kendall&#39;s tau correlation between billing vars</span>
df[ [<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>]]<span style="color:#f92672">.</span>corr(method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;kendall&#39;</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>By default corr function calculates pearson&rsquo;s correlation co-efficient.</li>
<li>But it&rsquo;s only appropriate to use Pearson&rsquo;s if the data is normally distributed and we know from the profile report that the distributions for the billing variables are highly skewed.</li>
<li>I think there&rsquo;s a way to output only the values below the diagonal.</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># name a sample of 1,000 data points selected from the df</span>
smpl<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>sample(n<span style="color:#f92672">=</span><span style="color:#ae81ff">1000</span>)

<span style="color:#75715e">#create pairwise plots of bill features using smpl</span>
sns<span style="color:#f92672">.</span>pairplot(smpl, hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;scatter&#39;</span>, vars<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;bill_ap&#39;</span>,<span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>])

<span style="color:#75715e">#save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#39;creditone_bill_pairplot.png&#39;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_bill_pairplot.png"/> 
</figure>

<p><em>Observations</em></p>
<ul>
<li>It&rsquo;s reasonable to suspect the billing variables might be correlated, since it&rsquo;s not uncommon for individuals' spending to be similar from month to month.</li>
<li>Yes, the billing variables are highly correlated with each other. Max: 0.8112, Min: 0.5853.</li>
<li>In general, the correlation is highest between each monthly billing variable and the variable representing the month after. The correlation declines with each proceeding month (e.g. the correlation is highest between the April (bill_ap) and May (bill_m) billing variables, and declines for each subsequent month.)
<ul>
<li>◘ May impact model performance. Consider only using one of the billing variables in model.</li>
</ul>
</li>
</ul>
<h2 id="are-the-payment-variables-correlated-with-each-other">Are the payment variables correlated with each other?</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#look at kendall&#39;s tau correlations b/t payment variables</span>
df[[<span style="color:#e6db74">&#39;pmt_ap&#39;</span>, <span style="color:#e6db74">&#39;pmt_m&#39;</span>, <span style="color:#e6db74">&#39;pmt_ju&#39;</span>, <span style="color:#e6db74">&#39;pmt_jy&#39;</span>, <span style="color:#e6db74">&#39;pmt_ag&#39;</span>, <span style="color:#e6db74">&#39;pmt_s&#39;</span>]]<span style="color:#f92672">.</span>corr(method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;kendall&#39;</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create a pairplot of the payment features using smpl (of 1,000)</span>
sns<span style="color:#f92672">.</span>pairplot(smpl, hue<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;scatter&#39;</span>, vars<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;pmt_ap&#39;</span>,<span style="color:#e6db74">&#39;pmt_m&#39;</span>, <span style="color:#e6db74">&#39;pmt_ju&#39;</span>, <span style="color:#e6db74">&#39;pmt_jy&#39;</span>, <span style="color:#e6db74">&#39;pmt_ag&#39;</span>, <span style="color:#e6db74">&#39;pmt_s&#39;</span>])

<span style="color:#75715e">#save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#39;creditone_pmt_pairplot.png&#39;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_pmt_pairplot.png"/> 
</figure>

<p><em>Observtions</em></p>
<ul>
<li>I wanted to look at whether the payment variables on related because I thought the amount customers pay each month  might be related to the amount they were billed during the previous month. If that&rsquo;s true and the billing variables are highly correlated, I would expect the payment variables to also be highly correlated.</li>
<li>When we look at the kendall&rsquo;s correlation coefficients between the payment vars they are modest (between 0.348 and 0.4126).</li>
<li>However, when we look at the scatter plots, there doesn&rsquo;t appear to be any obvious relationship.</li>
<li>This suggests, somewhat surprising, that the amount customers pay each month is not really related to the amount they are billed.
<ul>
<li>I wonder if the lack of a clear relationship is because I need to look at the relationships between billing vars and payment vars offset by one month (e.g. the relationship between the bill amount for April and the payment amount for May, and so on).</li>
</ul>
</li>
</ul>
<h2 id="are-the-payment-variables-correlated-with-the-billing-variables">Are the payment variables correlated with the billing variables?</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#look at kendall&#39;s tau correlations b/t payment variables</span>
df[[<span style="color:#e6db74">&#39;bill_ap&#39;</span>, <span style="color:#e6db74">&#39;bill_m&#39;</span>, <span style="color:#e6db74">&#39;bill_ju&#39;</span>, <span style="color:#e6db74">&#39;bill_jy&#39;</span>, <span style="color:#e6db74">&#39;bill_ag&#39;</span>, <span style="color:#e6db74">&#39;bill_s&#39;</span>,<span style="color:#e6db74">&#39;pmt_ap&#39;</span>, <span style="color:#e6db74">&#39;pmt_m&#39;</span>, <span style="color:#e6db74">&#39;pmt_ju&#39;</span>, <span style="color:#e6db74">&#39;pmt_jy&#39;</span>, <span style="color:#e6db74">&#39;pmt_ag&#39;</span>, <span style="color:#e6db74">&#39;pmt_s&#39;</span>]]<span style="color:#f92672">.</span>corr(method<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;kendall&#39;</span>)
</code></pre></div><p><em>Observations</em></p>
<ul>
<li>I expected to find a moderate to high correlation between the billing and payment variables, since presumably the amount customers pay each month is at least somewhat related to how much they are billed.</li>
<li>More specifically, we should expect that the payment amount is most highly correlated with the bill amount of the previous month (e.g. the july payment amount is has the strongest correlation with the bill amount for June.</li>
<li>The strongest correlations are around 0.51.</li>
</ul>
<h2 id="are-the-repayment-variables-related-to-the-billing-or-payment-variables">Are the repayment variables related to the billing or payment variables?</h2>
<p>The values in the repayment history variables should, in some sense, be related the values in the payment variables because the the repayment history variable is representing whether the customer has been using the credit, if they are paying their bills, and if their payments are for the full amount or leave a monthly balance (revolving credit).</p>
<ul>
<li>However, it&rsquo;s not clear how or what kind of relationship I can look for. One challenge is that the payment variables are continuous, and the repayment variables are categorical. It shouldf be the case that if a customer&rsquo;s monthly payment is not zero (i.e. they paid some amount) for some month, the value for their repayment history variable the next month should be -1 or zero.</li>
<li>I have no idea how I could test for that.</li>
</ul>
<h1 id="relationships-between-feature--target-variables">Relationships Between Feature &amp; Target Variables</h1>
<h2 id="credit-limit">Credit Limit</h2>
<p>In this section I will perform statistical tests to determine whether any of the DVs are related to the limit_bal target variable.</p>
<h3 id="demographic-variables--credit-limit">Demographic Variables &amp; Credit Limit</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># sns.heatmap(data=df, annot=True, fmt=&#34;d&#34;, linewidths=.5)</span>

<span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">Above code won&#39;t work with non-numeric data
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</code></pre></div><pre><code>&quot;\nAbove code won't work with non-numeric data\n&quot;
</code></pre>
<h3 id="sex--credit-limit">Sex &amp; Credit Limit</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>boxplot(data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;SEX&#39;</span>,y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span> )

<span style="color:#75715e"># save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#34;creditone_sex_credit_box.png&#34;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_sex_credit_box.png"/> 
</figure>

<p>The similarity between the box plots for female and male indicates there is no difference in credit limits between men and women. That means SEX is unlikely to be a helpful variable to include in a model prediting LIMIT_BAL.</p>
<h3 id="education--credit-limit">Education &amp; Credit Limit</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>catplot(data<span style="color:#f92672">=</span>df, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;box&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;EDUCATION&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>)<span style="color:#f92672">.</span>set_xticklabels(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)

<span style="color:#75715e"># save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#34;creditone_edu_credit_box.png&#34;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_edu_credit_box.png"/> 
</figure>

<p>The box plots for all education levels are very similar. Customers with a graduate education enjoy credit limits that are on average higher than the other groups. It also appears the credit limits for customers with a high school education are slightly skewed to the lower end. The differences aren&rsquo;t dramatic, but a customer&rsquo;s credit limit does appear to be somewhat related to their level of education</p>
<h3 id="marriage--credit-limit">Marriage &amp; Credit Limit</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>boxplot(data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MARRIAGE&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>)

<span style="color:#75715e"># save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#34;creditone_marriage_credit_box.png&#34;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_marriage_credit_box.png"/> 
</figure>

<p>Although there are some small differences in the plots, it does not appear that a customer&rsquo;s credit limit is related to their marital status.</p>
<h3 id="age--credit-limit">Age &amp; Credit Limit</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>scatterplot(data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;AGE&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>)

<span style="color:#75715e"># save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#34;creditone_age_credit_box.png&#34;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_age_credit_box.png"/> 
</figure>

<p>There doesn&rsquo;t appear to be any sort of meaningful relationship between age and credit limit.</p>
<h2 id="credit-default">Credit Default</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#obtain correlation co-efficients for all features and target</span>
df<span style="color:#f92672">.</span>corr()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>
    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of                  ID  MARRIAGE       AGE  LIMIT_BAL   bill_ap    bill_m  \
    ID         <span style="color:#ae81ff">1.000000</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.029079</span>  <span style="color:#ae81ff">0.018678</span>   <span style="color:#ae81ff">0.026179</span>  <span style="color:#ae81ff">0.016730</span>  <span style="color:#ae81ff">0.016705</span>   
    MARRIAGE  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.029079</span>  <span style="color:#ae81ff">1.000000</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.414170</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.108139</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.021207</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.025393</span>   
    AGE        <span style="color:#ae81ff">0.018678</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.414170</span>  <span style="color:#ae81ff">1.000000</span>   <span style="color:#ae81ff">0.144713</span>  <span style="color:#ae81ff">0.047613</span>  <span style="color:#ae81ff">0.049345</span>   
    LIMIT_BAL  <span style="color:#ae81ff">0.026179</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.108139</span>  <span style="color:#ae81ff">0.144713</span>   <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.290389</span>  <span style="color:#ae81ff">0.295562</span>   
    bill_ap    <span style="color:#ae81ff">0.016730</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.021207</span>  <span style="color:#ae81ff">0.047613</span>   <span style="color:#ae81ff">0.290389</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.946197</span>   
    bill_m     <span style="color:#ae81ff">0.016705</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.025393</span>  <span style="color:#ae81ff">0.049345</span>   <span style="color:#ae81ff">0.295562</span>  <span style="color:#ae81ff">0.946197</span>  <span style="color:#ae81ff">1.000000</span>   
    bill_ju    <span style="color:#ae81ff">0.040351</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.023344</span>  <span style="color:#ae81ff">0.051353</span>   <span style="color:#ae81ff">0.293988</span>  <span style="color:#ae81ff">0.900941</span>  <span style="color:#ae81ff">0.940134</span>   
    bill_jy    <span style="color:#ae81ff">0.024354</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.024909</span>  <span style="color:#ae81ff">0.053710</span>   <span style="color:#ae81ff">0.283236</span>  <span style="color:#ae81ff">0.853320</span>  <span style="color:#ae81ff">0.883910</span>   
    bill_ag    <span style="color:#ae81ff">0.017982</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.021602</span>  <span style="color:#ae81ff">0.054283</span>   <span style="color:#ae81ff">0.278314</span>  <span style="color:#ae81ff">0.831594</span>  <span style="color:#ae81ff">0.859778</span>   
    bill_s     <span style="color:#ae81ff">0.019389</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.023472</span>  <span style="color:#ae81ff">0.056239</span>   <span style="color:#ae81ff">0.285430</span>  <span style="color:#ae81ff">0.802650</span>  <span style="color:#ae81ff">0.829779</span>   
    pmt_ap     <span style="color:#ae81ff">0.003000</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.006641</span>  <span style="color:#ae81ff">0.019478</span>   <span style="color:#ae81ff">0.219595</span>  <span style="color:#ae81ff">0.115494</span>  <span style="color:#ae81ff">0.164184</span>   
    pmt_m      <span style="color:#ae81ff">0.000652</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.001205</span>  <span style="color:#ae81ff">0.022850</span>   <span style="color:#ae81ff">0.217202</span>  <span style="color:#ae81ff">0.307729</span>  <span style="color:#ae81ff">0.141574</span>   
    pmt_ju     <span style="color:#ae81ff">0.007793</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.012659</span>  <span style="color:#ae81ff">0.021379</span>   <span style="color:#ae81ff">0.203242</span>  <span style="color:#ae81ff">0.250237</span>  <span style="color:#ae81ff">0.293118</span>   
    pmt_jy     <span style="color:#ae81ff">0.039151</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.003541</span>  <span style="color:#ae81ff">0.029247</span>   <span style="color:#ae81ff">0.210167</span>  <span style="color:#ae81ff">0.233770</span>  <span style="color:#ae81ff">0.252305</span>   
    pmt_ag     <span style="color:#ae81ff">0.008406</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.008093</span>  <span style="color:#ae81ff">0.021785</span>   <span style="color:#ae81ff">0.178408</span>  <span style="color:#ae81ff">0.172663</span>  <span style="color:#ae81ff">0.181246</span>   
    pmt_s      <span style="color:#ae81ff">0.009742</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.005979</span>  <span style="color:#ae81ff">0.026147</span>   <span style="color:#ae81ff">0.195236</span>  <span style="color:#ae81ff">0.199965</span>  <span style="color:#ae81ff">0.217031</span>   
    pay_ap    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.020270</span>  <span style="color:#ae81ff">0.034345</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.048773</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.235195</span>  <span style="color:#ae81ff">0.285091</span>  <span style="color:#ae81ff">0.290894</span>   
    pay_m     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.022199</span>  <span style="color:#ae81ff">0.035629</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053826</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.249411</span>  <span style="color:#ae81ff">0.262509</span>  <span style="color:#ae81ff">0.269783</span>   
    pay_ju    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.002735</span>  <span style="color:#ae81ff">0.033122</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.049722</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.267460</span>  <span style="color:#ae81ff">0.239154</span>  <span style="color:#ae81ff">0.242902</span>   
    pay_jy    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.018494</span>  <span style="color:#ae81ff">0.032688</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053048</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.286123</span>  <span style="color:#ae81ff">0.222327</span>  <span style="color:#ae81ff">0.225145</span>   
    pay_ag    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.011215</span>  <span style="color:#ae81ff">0.024199</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.050148</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.296382</span>  <span style="color:#ae81ff">0.219403</span>  <span style="color:#ae81ff">0.221348</span>   
    pay_s     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.030575</span>  <span style="color:#ae81ff">0.019917</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.039447</span>  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.271214</span>  <span style="color:#ae81ff">0.176980</span>  <span style="color:#ae81ff">0.180635</span>   

                bill_ju   bill_jy   bill_ag    bill_s  <span style="color:#f92672">...</span>    pmt_ju    pmt_jy  \
    ID         <span style="color:#ae81ff">0.040351</span>  <span style="color:#ae81ff">0.024354</span>  <span style="color:#ae81ff">0.017982</span>  <span style="color:#ae81ff">0.019389</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.007793</span>  <span style="color:#ae81ff">0.039151</span>   
    MARRIAGE  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.023344</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.024909</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.021602</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.023472</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.012659</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.003541</span>   
    AGE        <span style="color:#ae81ff">0.051353</span>  <span style="color:#ae81ff">0.053710</span>  <span style="color:#ae81ff">0.054283</span>  <span style="color:#ae81ff">0.056239</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.021379</span>  <span style="color:#ae81ff">0.029247</span>   
    LIMIT_BAL  <span style="color:#ae81ff">0.293988</span>  <span style="color:#ae81ff">0.283236</span>  <span style="color:#ae81ff">0.278314</span>  <span style="color:#ae81ff">0.285430</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.203242</span>  <span style="color:#ae81ff">0.210167</span>   
    bill_ap    <span style="color:#ae81ff">0.900941</span>  <span style="color:#ae81ff">0.853320</span>  <span style="color:#ae81ff">0.831594</span>  <span style="color:#ae81ff">0.802650</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.250237</span>  <span style="color:#ae81ff">0.233770</span>   
    bill_m     <span style="color:#ae81ff">0.940134</span>  <span style="color:#ae81ff">0.883910</span>  <span style="color:#ae81ff">0.859778</span>  <span style="color:#ae81ff">0.829779</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.293118</span>  <span style="color:#ae81ff">0.252305</span>   
    bill_ju    <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.923969</span>  <span style="color:#ae81ff">0.892482</span>  <span style="color:#ae81ff">0.860272</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.130191</span>  <span style="color:#ae81ff">0.300023</span>   
    bill_jy    <span style="color:#ae81ff">0.923969</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.928326</span>  <span style="color:#ae81ff">0.892279</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.143405</span>  <span style="color:#ae81ff">0.130011</span>   
    bill_ag    <span style="color:#ae81ff">0.892482</span>  <span style="color:#ae81ff">0.928326</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.951484</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.147398</span>  <span style="color:#ae81ff">0.150718</span>   
    bill_s     <span style="color:#ae81ff">0.860272</span>  <span style="color:#ae81ff">0.892279</span>  <span style="color:#ae81ff">0.951484</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.158303</span>  <span style="color:#ae81ff">0.156887</span>   
    pmt_ap     <span style="color:#ae81ff">0.177637</span>  <span style="color:#ae81ff">0.182326</span>  <span style="color:#ae81ff">0.174256</span>  <span style="color:#ae81ff">0.179341</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.157834</span>  <span style="color:#ae81ff">0.162740</span>   
    pmt_m      <span style="color:#ae81ff">0.160433</span>  <span style="color:#ae81ff">0.179712</span>  <span style="color:#ae81ff">0.157957</span>  <span style="color:#ae81ff">0.167026</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.151830</span>  <span style="color:#ae81ff">0.159214</span>   
    pmt_ju     <span style="color:#ae81ff">0.130191</span>  <span style="color:#ae81ff">0.143405</span>  <span style="color:#ae81ff">0.147398</span>  <span style="color:#ae81ff">0.158303</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.216325</span>   
    pmt_jy     <span style="color:#ae81ff">0.300023</span>  <span style="color:#ae81ff">0.130011</span>  <span style="color:#ae81ff">0.150718</span>  <span style="color:#ae81ff">0.156887</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.216325</span>  <span style="color:#ae81ff">1.000000</span>   
    pmt_ag     <span style="color:#ae81ff">0.207564</span>  <span style="color:#ae81ff">0.316936</span>  <span style="color:#ae81ff">0.100851</span>  <span style="color:#ae81ff">0.099355</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.180107</span>  <span style="color:#ae81ff">0.244770</span>   
    pmt_s      <span style="color:#ae81ff">0.233012</span>  <span style="color:#ae81ff">0.244335</span>  <span style="color:#ae81ff">0.280365</span>  <span style="color:#ae81ff">0.140277</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.199558</span>  <span style="color:#ae81ff">0.252191</span>   
    pay_ap     <span style="color:#ae81ff">0.266356</span>  <span style="color:#ae81ff">0.241181</span>  <span style="color:#ae81ff">0.226924</span>  <span style="color:#ae81ff">0.207373</span>  <span style="color:#f92672">...</span>  <span style="color:#ae81ff">0.019018</span>  <span style="color:#ae81ff">0.005834</span>   
    pay_m      <span style="color:#ae81ff">0.271915</span>  <span style="color:#ae81ff">0.243335</span>  <span style="color:#ae81ff">0.226913</span>  <span style="color:#ae81ff">0.206684</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058299</span>  <span style="color:#ae81ff">0.009062</span>   
    pay_ju     <span style="color:#ae81ff">0.245917</span>  <span style="color:#ae81ff">0.244983</span>  <span style="color:#ae81ff">0.225816</span>  <span style="color:#ae81ff">0.202812</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.043461</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.069235</span>   
    pay_jy     <span style="color:#ae81ff">0.227202</span>  <span style="color:#ae81ff">0.227494</span>  <span style="color:#ae81ff">0.237295</span>  <span style="color:#ae81ff">0.208473</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.046067</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053311</span>   
    pay_ag     <span style="color:#ae81ff">0.222237</span>  <span style="color:#ae81ff">0.224146</span>  <span style="color:#ae81ff">0.235257</span>  <span style="color:#ae81ff">0.234887</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.046858</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.055901</span>   
    pay_s      <span style="color:#ae81ff">0.179125</span>  <span style="color:#ae81ff">0.179785</span>  <span style="color:#ae81ff">0.189859</span>  <span style="color:#ae81ff">0.187068</span>  <span style="color:#f92672">...</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.064005</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.070561</span>   

                 pmt_ag     pmt_s    pay_ap     pay_m    pay_ju    pay_jy  \
    ID         <span style="color:#ae81ff">0.008406</span>  <span style="color:#ae81ff">0.009742</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.020270</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.022199</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.002735</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.018494</span>   
    MARRIAGE  <span style="color:#f92672">-</span><span style="color:#ae81ff">0.008093</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.005979</span>  <span style="color:#ae81ff">0.034345</span>  <span style="color:#ae81ff">0.035629</span>  <span style="color:#ae81ff">0.033122</span>  <span style="color:#ae81ff">0.032688</span>   
    AGE        <span style="color:#ae81ff">0.021785</span>  <span style="color:#ae81ff">0.026147</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.048773</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053826</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.049722</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053048</span>   
    LIMIT_BAL  <span style="color:#ae81ff">0.178408</span>  <span style="color:#ae81ff">0.195236</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.235195</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.249411</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.267460</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.286123</span>   
    bill_ap    <span style="color:#ae81ff">0.172663</span>  <span style="color:#ae81ff">0.199965</span>  <span style="color:#ae81ff">0.285091</span>  <span style="color:#ae81ff">0.262509</span>  <span style="color:#ae81ff">0.239154</span>  <span style="color:#ae81ff">0.222327</span>   
    bill_m     <span style="color:#ae81ff">0.181246</span>  <span style="color:#ae81ff">0.217031</span>  <span style="color:#ae81ff">0.290894</span>  <span style="color:#ae81ff">0.269783</span>  <span style="color:#ae81ff">0.242902</span>  <span style="color:#ae81ff">0.225145</span>   
    bill_ju    <span style="color:#ae81ff">0.207564</span>  <span style="color:#ae81ff">0.233012</span>  <span style="color:#ae81ff">0.266356</span>  <span style="color:#ae81ff">0.271915</span>  <span style="color:#ae81ff">0.245917</span>  <span style="color:#ae81ff">0.227202</span>   
    bill_jy    <span style="color:#ae81ff">0.316936</span>  <span style="color:#ae81ff">0.244335</span>  <span style="color:#ae81ff">0.241181</span>  <span style="color:#ae81ff">0.243335</span>  <span style="color:#ae81ff">0.244983</span>  <span style="color:#ae81ff">0.227494</span>   
    bill_ag    <span style="color:#ae81ff">0.100851</span>  <span style="color:#ae81ff">0.280365</span>  <span style="color:#ae81ff">0.226924</span>  <span style="color:#ae81ff">0.226913</span>  <span style="color:#ae81ff">0.225816</span>  <span style="color:#ae81ff">0.237295</span>   
    bill_s     <span style="color:#ae81ff">0.099355</span>  <span style="color:#ae81ff">0.140277</span>  <span style="color:#ae81ff">0.207373</span>  <span style="color:#ae81ff">0.206684</span>  <span style="color:#ae81ff">0.202812</span>  <span style="color:#ae81ff">0.208473</span>   
    pmt_ap     <span style="color:#ae81ff">0.157634</span>  <span style="color:#ae81ff">0.185735</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.025299</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.023027</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.026565</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.035861</span>   
    pmt_m      <span style="color:#ae81ff">0.180908</span>  <span style="color:#ae81ff">0.148459</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.046434</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.033337</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.033590</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.035863</span>   
    pmt_ju     <span style="color:#ae81ff">0.180107</span>  <span style="color:#ae81ff">0.199558</span>  <span style="color:#ae81ff">0.019018</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058299</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.043461</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.046067</span>   
    pmt_jy     <span style="color:#ae81ff">0.244770</span>  <span style="color:#ae81ff">0.252191</span>  <span style="color:#ae81ff">0.005834</span>  <span style="color:#ae81ff">0.009062</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.069235</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.053311</span>   
    pmt_ag     <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.285576</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.005223</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.003191</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.001944</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.066793</span>   
    pmt_s      <span style="color:#ae81ff">0.285576</span>  <span style="color:#ae81ff">1.000000</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.001496</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.006089</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.009362</span>  <span style="color:#ae81ff">0.001295</span>   
    pay_ap    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.005223</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.001496</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.816900</span>  <span style="color:#ae81ff">0.716449</span>  <span style="color:#ae81ff">0.632684</span>   
    pay_m     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.003191</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.006089</span>  <span style="color:#ae81ff">0.816900</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.819835</span>  <span style="color:#ae81ff">0.686775</span>   
    pay_ju    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.001944</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.009362</span>  <span style="color:#ae81ff">0.716449</span>  <span style="color:#ae81ff">0.819835</span>  <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.777359</span>   
    pay_jy    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.066793</span>  <span style="color:#ae81ff">0.001295</span>  <span style="color:#ae81ff">0.632684</span>  <span style="color:#ae81ff">0.686775</span>  <span style="color:#ae81ff">0.777359</span>  <span style="color:#ae81ff">1.000000</span>   
    pay_ag    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058990</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.080701</span>  <span style="color:#ae81ff">0.575501</span>  <span style="color:#ae81ff">0.622780</span>  <span style="color:#ae81ff">0.662067</span>  <span style="color:#ae81ff">0.766552</span>   
    pay_s     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.070101</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.079269</span>  <span style="color:#ae81ff">0.474553</span>  <span style="color:#ae81ff">0.509426</span>  <span style="color:#ae81ff">0.538841</span>  <span style="color:#ae81ff">0.574245</span>   

                 pay_ag     pay_s  
    ID        <span style="color:#f92672">-</span><span style="color:#ae81ff">0.011215</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.030575</span>  
    MARRIAGE   <span style="color:#ae81ff">0.024199</span>  <span style="color:#ae81ff">0.019917</span>  
    AGE       <span style="color:#f92672">-</span><span style="color:#ae81ff">0.050148</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.039447</span>  
    LIMIT_BAL <span style="color:#f92672">-</span><span style="color:#ae81ff">0.296382</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.271214</span>  
    bill_ap    <span style="color:#ae81ff">0.219403</span>  <span style="color:#ae81ff">0.176980</span>  
    bill_m     <span style="color:#ae81ff">0.221348</span>  <span style="color:#ae81ff">0.180635</span>  
    bill_ju    <span style="color:#ae81ff">0.222237</span>  <span style="color:#ae81ff">0.179125</span>  
    bill_jy    <span style="color:#ae81ff">0.224146</span>  <span style="color:#ae81ff">0.179785</span>  
    bill_ag    <span style="color:#ae81ff">0.235257</span>  <span style="color:#ae81ff">0.189859</span>  
    bill_s     <span style="color:#ae81ff">0.234887</span>  <span style="color:#ae81ff">0.187068</span>  
    pmt_ap    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.036500</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058673</span>  
    pmt_m     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.037093</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058190</span>  
    pmt_ju    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.046858</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.064005</span>  
    pmt_jy    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.055901</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.070561</span>  
    pmt_ag    <span style="color:#f92672">-</span><span style="color:#ae81ff">0.058990</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.070101</span>  
    pmt_s     <span style="color:#f92672">-</span><span style="color:#ae81ff">0.080701</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">0.079269</span>  
    pay_ap     <span style="color:#ae81ff">0.575501</span>  <span style="color:#ae81ff">0.474553</span>  
    pay_m      <span style="color:#ae81ff">0.622780</span>  <span style="color:#ae81ff">0.509426</span>  
    pay_ju     <span style="color:#ae81ff">0.662067</span>  <span style="color:#ae81ff">0.538841</span>  
    pay_jy     <span style="color:#ae81ff">0.766552</span>  <span style="color:#ae81ff">0.574245</span>  
    pay_ag     <span style="color:#ae81ff">1.000000</span>  <span style="color:#ae81ff">0.672164</span>  
    pay_s      <span style="color:#ae81ff">0.672164</span>  <span style="color:#ae81ff">1.000000</span>  

    [<span style="color:#ae81ff">22</span> rows x <span style="color:#ae81ff">22</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><h3 id="demographic-features--defualt-target">Demographic Features &amp; Defualt Target</h3>
<h4 id="sex--default">Sex &amp; Default</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>displot(data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SEX&#34;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;density&#39;</span>, shrink<span style="color:#f92672">=.</span><span style="color:#ae81ff">8</span>)
</code></pre></div><pre><code>&lt;seaborn.axisgrid.FacetGrid at 0x23c43023370&gt;
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>displot(data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;SEX&#34;</span>, col<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;density&#39;</span>, shrink<span style="color:#f92672">=.</span><span style="color:#ae81ff">8</span>)

<span style="color:#75715e">#save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#39;creditone_sex_default_notdefault.png&#39;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_sex_default_notdefault"/> 
</figure>

<p><em>Observations</em></p>
<ul>
<li>From the first plot, we can see that CreditOne&rsquo;s customers are slightly more likely to be female than male.</li>
<li>From the second set of plots, when we compare the data for customers who have defualted on their loans to the data for the customers who have not defaulted on their loans, it looks like customers who have defaulted on their loans are slightly more likely to be male than customers overall&ndash;however, it&rsquo;s unlikely this difference is statistically significant.</li>
<li>The fact that the relative probabilities of being female vs. male is almost the same among the customers who have defaulted and the customers who have not defualted suggests that sex will not be an important feature in a model predicting whether a customer will defualt on their loans.</li>
</ul>
<h4 id="education--default">Education &amp; Default</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create probability chart for the EDU var</span>
sns<span style="color:#f92672">.</span>displot(data<span style="color:#f92672">=</span>df, x <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;EDUCATION&#34;</span>, discrete<span style="color:#f92672">=</span>True, shrink <span style="color:#f92672">=</span> <span style="color:#f92672">.</span><span style="color:#ae81ff">8</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>)<span style="color:#f92672">.</span>set_xticklabels(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create subplots showing the distribution for the EDU var conditional on the DEFUALT var</span>
sns<span style="color:#f92672">.</span>displot(data<span style="color:#f92672">=</span>df, x <span style="color:#f92672">=</span><span style="color:#e6db74">&#34;EDUCATION&#34;</span>, col <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;DEFAULT&#39;</span>, shrink <span style="color:#f92672">=</span> <span style="color:#f92672">.</span><span style="color:#ae81ff">8</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>)<span style="color:#f92672">.</span>set_xticklabels(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</code></pre></div><p><em>Observations</em></p>
<ul>
<li>Since higher levels of education are highly correlated with higher levels of income, and higher levels of income are presumably correlated with lower rates of defaulting on loans. I was anticipating that customers with university and graduate school levels of education to be relatively less likely to default on their loans.</li>
<li>However, comparing the distributions of education levels for customers who have defaulted to the ebb</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># this code generates a messed up plot</span>
g <span style="color:#f92672">=</span> sns<span style="color:#f92672">.</span>FacetGrid(data<span style="color:#f92672">=</span>df, col<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;DEFAULT&#34;</span>, sharey<span style="color:#f92672">=</span>False)
g<span style="color:#f92672">.</span>map_dataframe(sns<span style="color:#f92672">.</span>histplot, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;EDUCATION&#34;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>)
g<span style="color:#f92672">.</span>set_xticklabels(rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>I created the g subpolots at fisrt and thought they revealed an interesting relationship between level of edu and whether a customer had defaulted on their loans. It looked like relative to other groups, those with a high school edu level are less likely to default on their loans, and those with the other edu level are more likely.</li>
<li>However, I continued to mess around and try out different types of plots and use different code, and none of the subsequent plots I generated showed the pattern. They all showed the pattern we would expect to see if there is no significant relationship between level of education and whether a customer defaulted on their loan.</li>
<li>I investigated the issue extensively on my own and tried to figure it out with David Schwab, but it is still a mystery.</li>
<li>David pointed out that in the weird charts it looks like bars for the &ldquo;high school&rdquo; and &ldquo;other&rdquo; levels the bars have been swapped. That sounds plausible to me, but we could not figure out how that could have happened, or how to get rid of it.</li>
</ul>
</blockquote>
<h4 id="age--default">Age &amp; Default</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">sns<span style="color:#f92672">.</span>catplot(data<span style="color:#f92672">=</span>df, kind<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;box&#39;</span>, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;AGE&#39;</span>)

<span style="color:#75715e">#save plot as png</span>
plt<span style="color:#f92672">.</span>savefig(<span style="color:#e6db74">&#39;creditone_age_default.png&#39;</span>)
</code></pre></div><figure>
    <img src="https://katherinepiatti.com/images/creditone_age_default.png"/> 
</figure>

<p><em>Observations</em></p>
<ul>
<li>We can see in the above boxplot the the mean, IQR (middle 50% of data points), and range for the age variable are nearly identical for customers who defaulted on their loans (blue box) and for customers who did not defualt on their loans (orange box).</li>
<li>This suggests there is no significant relationship between a customer&rsquo;s age and whether or not she defaulted on her loans, which means AGE will not be an important feature in a model predicting whether a customer will default.</li>
</ul>
<h4 id="marriage--default">Marriage &amp; Default</h4>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the df to return only rows where value for DEFAULT == default</span>
dflt <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;default&#39;</span>]
dflt<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>

    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of     ID     SEX        EDUCATION  MARRIAGE  AGE  LIMIT_BAL  bill_ap  bill_m  \
    <span style="color:#ae81ff">0</span>    <span style="color:#ae81ff">1</span>  female       university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">24</span>      <span style="color:#ae81ff">20000</span>        <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">1</span>    <span style="color:#ae81ff">2</span>  female       university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">26</span>     <span style="color:#ae81ff">120000</span>     <span style="color:#ae81ff">3261</span>    <span style="color:#ae81ff">3455</span>   
    <span style="color:#ae81ff">13</span>  <span style="color:#ae81ff">14</span>    male       university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">30</span>      <span style="color:#ae81ff">70000</span>    <span style="color:#ae81ff">36894</span>   <span style="color:#ae81ff">36137</span>   
    <span style="color:#ae81ff">16</span>  <span style="color:#ae81ff">17</span>    male  graduate school         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">24</span>      <span style="color:#ae81ff">20000</span>    <span style="color:#ae81ff">19104</span>   <span style="color:#ae81ff">17905</span>   
    <span style="color:#ae81ff">21</span>  <span style="color:#ae81ff">22</span>  female       university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">39</span>     <span style="color:#ae81ff">120000</span>      <span style="color:#ae81ff">316</span>     <span style="color:#ae81ff">632</span>   

        bill_ju  bill_jy  <span style="color:#f92672">...</span>  pmt_jy  pmt_ag  pmt_s  pay_ap  pay_m  pay_ju  \
    <span style="color:#ae81ff">0</span>         <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">689</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">689</span>      <span style="color:#ae81ff">0</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">2</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   
    <span style="color:#ae81ff">1</span>      <span style="color:#ae81ff">3272</span>     <span style="color:#ae81ff">2682</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">1000</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">13</span>    <span style="color:#ae81ff">66782</span>    <span style="color:#ae81ff">65701</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">3000</span>       <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">3200</span>       <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">16</span>    <span style="color:#ae81ff">18338</span>    <span style="color:#ae81ff">17428</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">1500</span>       <span style="color:#ae81ff">0</span>   <span style="color:#ae81ff">3200</span>       <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">2</span>   
    <span style="color:#ae81ff">21</span>        <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">316</span>  <span style="color:#f92672">...</span>       <span style="color:#ae81ff">0</span>     <span style="color:#ae81ff">316</span>    <span style="color:#ae81ff">316</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>   

        pay_jy  pay_ag  pay_s  DEFAULT  
    <span style="color:#ae81ff">0</span>       <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>       <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">2</span>  default  
    <span style="color:#ae81ff">1</span>        <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">2</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  default  
    <span style="color:#ae81ff">13</span>       <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">1</span>  default  
    <span style="color:#ae81ff">16</span>       <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  default  
    <span style="color:#ae81ff">21</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  default  

    [<span style="color:#ae81ff">5</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the df to return only rows where value for DEFAULT == not default</span>
nodflt <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>]<span style="color:#f92672">==</span><span style="color:#e6db74">&#39;not default&#39;</span>]
nodflt<span style="color:#f92672">.</span>head()<span style="color:#f92672">.</span>to_markdown
<span style="color:#f92672">---</span>
    <span style="color:#f92672">&lt;</span>bound method DataFrame<span style="color:#f92672">.</span>to_markdown of    ID     SEX        EDUCATION  MARRIAGE  AGE  LIMIT_BAL  bill_ap  bill_m  \
    <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">3</span>  female       university         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">34</span>      <span style="color:#ae81ff">90000</span>    <span style="color:#ae81ff">15549</span>   <span style="color:#ae81ff">14948</span>   
    <span style="color:#ae81ff">3</span>   <span style="color:#ae81ff">4</span>  female       university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">37</span>      <span style="color:#ae81ff">50000</span>    <span style="color:#ae81ff">29547</span>   <span style="color:#ae81ff">28959</span>   
    <span style="color:#ae81ff">4</span>   <span style="color:#ae81ff">5</span>    male       university         <span style="color:#ae81ff">1</span>   <span style="color:#ae81ff">57</span>      <span style="color:#ae81ff">50000</span>    <span style="color:#ae81ff">19131</span>   <span style="color:#ae81ff">19146</span>   
    <span style="color:#ae81ff">5</span>   <span style="color:#ae81ff">6</span>    male  graduate school         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">37</span>      <span style="color:#ae81ff">50000</span>    <span style="color:#ae81ff">20024</span>   <span style="color:#ae81ff">19619</span>   
    <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">7</span>    male  graduate school         <span style="color:#ae81ff">2</span>   <span style="color:#ae81ff">29</span>     <span style="color:#ae81ff">500000</span>   <span style="color:#ae81ff">473944</span>  <span style="color:#ae81ff">483003</span>   

       bill_ju  bill_jy  <span style="color:#f92672">...</span>  pmt_jy  pmt_ag  pmt_s  pay_ap  pay_m  pay_ju  \
    <span style="color:#ae81ff">2</span>    <span style="color:#ae81ff">14331</span>    <span style="color:#ae81ff">13559</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">1000</span>    <span style="color:#ae81ff">1500</span>   <span style="color:#ae81ff">1518</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">3</span>    <span style="color:#ae81ff">28314</span>    <span style="color:#ae81ff">49291</span>  <span style="color:#f92672">...</span>    <span style="color:#ae81ff">1200</span>    <span style="color:#ae81ff">2019</span>   <span style="color:#ae81ff">2000</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">4</span>    <span style="color:#ae81ff">20940</span>    <span style="color:#ae81ff">35835</span>  <span style="color:#f92672">...</span>   <span style="color:#ae81ff">10000</span>   <span style="color:#ae81ff">36681</span>   <span style="color:#ae81ff">2000</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">5</span>    <span style="color:#ae81ff">19394</span>    <span style="color:#ae81ff">57608</span>  <span style="color:#f92672">...</span>     <span style="color:#ae81ff">657</span>    <span style="color:#ae81ff">1815</span>   <span style="color:#ae81ff">2500</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   
    <span style="color:#ae81ff">6</span>   <span style="color:#ae81ff">542653</span>   <span style="color:#ae81ff">445007</span>  <span style="color:#f92672">...</span>   <span style="color:#ae81ff">38000</span>   <span style="color:#ae81ff">40000</span>  <span style="color:#ae81ff">55000</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>   

       pay_jy  pay_ag  pay_s      DEFAULT  
    <span style="color:#ae81ff">2</span>       <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">3</span>       <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">4</span>      <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>       <span style="color:#ae81ff">0</span>     <span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">5</span>       <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">not</span> default  
    <span style="color:#ae81ff">6</span>       <span style="color:#ae81ff">0</span>       <span style="color:#ae81ff">0</span>      <span style="color:#ae81ff">0</span>  <span style="color:#f92672">not</span> default  

    [<span style="color:#ae81ff">5</span> rows x <span style="color:#ae81ff">25</span> columns]<span style="color:#f92672">&gt;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">3</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">13</span>,<span style="color:#ae81ff">5</span>), sharey<span style="color:#f92672">=</span>True)
axes[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;All Customers&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)
axes[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Customers who defualted&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)
axes[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>set_title(<span style="color:#e6db74">&#39;Customers who did not default&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">14</span>)

<span style="color:#75715e"># To iterate over all items in a multidimensional numpy array, use the `flat` attribute</span>
<span style="color:#66d9ef">for</span> ax <span style="color:#f92672">in</span> axes<span style="color:#f92672">.</span>flat:
    <span style="color:#75715e"># set xticks...</span>
    ax<span style="color:#f92672">.</span>set(xticks<span style="color:#f92672">=</span>[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>])

fig<span style="color:#f92672">.</span>suptitle(t<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;Is there a relationship between customers marital status &amp; whether they defaulted?&#39;</span>, verticalalignment<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;baseline&#39;</span>, fontsize<span style="color:#f92672">=</span><span style="color:#ae81ff">18</span>)
labels<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;Other&#39;</span>, <span style="color:#e6db74">&#39;Married&#39;</span>, <span style="color:#e6db74">&#39;Single&#39;</span>, <span style="color:#e6db74">&#39;Divorced&#39;</span>]


sns<span style="color:#f92672">.</span>histplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>], data<span style="color:#f92672">=</span>df, x <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MARRIAGE&#39;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>, discrete<span style="color:#f92672">=</span>True, shrink<span style="color:#f92672">=.</span><span style="color:#ae81ff">8</span>)
axes[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;&#39;</span>)
axes[<span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>set_xticklabels(labels<span style="color:#f92672">=</span>labels, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)

sns<span style="color:#f92672">.</span>histplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>], data<span style="color:#f92672">=</span>dflt, x <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MARRIAGE&#39;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>, discrete<span style="color:#f92672">=</span>True, shrink<span style="color:#f92672">=.</span><span style="color:#ae81ff">8</span>)
axes[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;&#39;</span>)
axes[<span style="color:#ae81ff">1</span>]<span style="color:#f92672">.</span>set_xticklabels(labels<span style="color:#f92672">=</span>labels, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)

sns<span style="color:#f92672">.</span>histplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">2</span>], data<span style="color:#f92672">=</span>nodflt, x <span style="color:#f92672">=</span><span style="color:#e6db74">&#39;MARRIAGE&#39;</span>, stat<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;probability&#39;</span>, discrete<span style="color:#f92672">=</span>True, shrink<span style="color:#f92672">=.</span><span style="color:#ae81ff">8</span>)
axes[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>set_xticklabels(labels<span style="color:#f92672">=</span>labels, rotation<span style="color:#f92672">=</span><span style="color:#ae81ff">45</span>)
axes[<span style="color:#ae81ff">2</span>]<span style="color:#f92672">.</span>set_xlabel(<span style="color:#e6db74">&#39;&#39;</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>It look several hours to get the above row of plots.</li>
<li>Problems I had to solve:</li>
</ul>
</blockquote>
<ul>
<li>Because the number of defualts is much smaller than not defaults, to compare sex across the two categories I couldn&rsquo;t use count as the y axis, I needed to plot a normalized stat like probability or density.</li>
<li>Using hue: When I tried to use hue to represent the DEFAULT categories and plot them on one set of axes, the resulting graph had 4 bars (2 for female, 2 male) whose probabilities summed to 1. Which meant the bars for male an female in the default category were much smaller than the bars for male and female in the not default category.</li>
<li>I also couldn</li>
</ul>
<p><em>Observations</em></p>
<ul>
<li>From a comparison on the above plots, there appears that single customers are relatively less likely to default on their loans.</li>
</ul>
<h3 id="billing-variables--credit-default">Billing Variables &amp; Credit Default</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">18</span>), sharey<span style="color:#f92672">=</span>True)

fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Monthly Bill Amounts Grouped by DEFAULT&#39;</span>)

sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_ap&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_m&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_ju&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_jy&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_ag&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;bill_s&#39;</span>)

</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
</blockquote>
<ul>
<li>Before finding the code to create the above 2x6 grid of subplots, I created the boxplots for each billing variable separately. For future refernce here is the code I used:
<ul>
<li><code>sns.catplot(data=df, kind='box', x='DEFAULT', y='bill_ap')</code></li>
<li><code>sns.catplot(data=df, kind='box', x='DEFAULT', y='bill_m', height=6)</code></li>
<li><code>sns.catplot(data=df, kind='box', x='DEFAULT', y='bill_ju', height=6, aspect=.5)</code></li>
<li><code>sns.catplot(data=df, kind='box', x='DEFAULT', y='bill_ag', height=8, aspect=.5)</code></li>
<li><code>sns.catplot(data=df, kind='box', x='DEFAULT', y='bill_s', height=8, aspect=.5)</code></li>
</ul>
</li>
</ul>
<p><em>Observations</em></p>
<ul>
<li>I have more questions than observations.
<ul>
<li>It looks like there are some significant outliers. How can we find those data points in our df.</li>
<li>Other than some differences in outliers and a noticable difference in the length of the wiskers in bill_ag, all the box plots are basically the same. What, if anything, can we conclude from that?</li>
</ul>
</li>
</ul>
<h3 id="payment-variables--default">Payment Variables &amp; Default</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">fig, axes <span style="color:#f92672">=</span> plt<span style="color:#f92672">.</span>subplots(<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, figsize<span style="color:#f92672">=</span>(<span style="color:#ae81ff">20</span>,<span style="color:#ae81ff">25</span>), sharey<span style="color:#f92672">=</span>True)

fig<span style="color:#f92672">.</span>suptitle(<span style="color:#e6db74">&#39;Monthly Payment Variables Grouped by DEFAULT&#39;</span>)

sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">0</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_ap&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">1</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_m&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">2</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_ju&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">0</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_jy&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">1</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_ag&#39;</span>)
sns<span style="color:#f92672">.</span>boxplot(ax<span style="color:#f92672">=</span>axes[<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>], data<span style="color:#f92672">=</span>df, x<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;DEFAULT&#39;</span>, y<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;pmt_s&#39;</span>)

</code></pre></div><p><em>Observations</em></p>
<ul>
<li>
<p>I assume the boxplots for the payment variables look like this because there is a high % of zeros in these variables.</p>
</li>
<li>
<p>I also seem some signigicant outliers.</p>
</li>
<li>
<p>Questions:</p>
<ul>
<li>I don&rsquo;t have a good sense of how to interpret/understand what I&rsquo;m seeing when I compare visualizations of DVs conditional on a target variable. Am I just looking for significant differences? What conclusions would you draw from seeing the above plots for the payment variables? Are there any rules of thumb?</li>
<li>How do you go about figuring out whether it would improve the situation to bin the values, remove outliers, aggregate the variables, etc? There are too many possibilities to test them all. How do you narrow things down? Is there a way to determine which changes are most likely to have an impact so you can focus your efforts?</li>
</ul>
</li>
</ul>
<h1 id="transform-non-numeric-values">Transform Non-numeric Values</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># select columns with non-numeric data and create a new df with only those columns (so changes aren&#39;t in original df)</span>
obj_df <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>select_dtypes(include<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;object&#39;</span>])<span style="color:#f92672">.</span>copy()
obj_df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># change data types from object to category to make transforminmg faster</span>
cat_df <span style="color:#f92672">=</span> obj_df[[<span style="color:#e6db74">&#39;SEX&#39;</span>, <span style="color:#e6db74">&#39;EDUCATION&#39;</span>, <span style="color:#e6db74">&#39;DEFAULT&#39;</span>]]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;category&#39;</span>)

<span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">I read that it&#39;s more efficient to transform non-numerical data into numerical data
</span><span style="color:#e6db74">if the vars to be transformed have the &#39;category data type instead of &#39;object&#39; dtype
</span><span style="color:#e6db74">To find out how long things take to run use the %timeit magic
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
cat_df<span style="color:#f92672">.</span>dtypes
<span style="color:#f92672">---</span>
    SEX          category
    EDUCATION    category
    DEFAULT      category
    dtype: object
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import label encoder from sklearn</span>
<span style="color:#f92672">from</span> sklearn.preprocessing <span style="color:#f92672">import</span> LabelEncoder

<span style="color:#75715e">#instiate the label encoder function, call it le</span>
le <span style="color:#f92672">=</span> LabelEncoder()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># use label encoder to  encode values in SEX column as numbers and add new column to df to preserve encoded values</span>
cat_df[<span style="color:#e6db74">&#39;sex_le&#39;</span>]<span style="color:#f92672">=</span>le<span style="color:#f92672">.</span>fit_transform(cat_df[<span style="color:#e6db74">&#39;SEX&#39;</span>])

cat_df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># use label encoder to  encode values in SEX column as numbers and add new column to df to preserve encoded values</span>
cat_df[<span style="color:#e6db74">&#39;dflt_le&#39;</span>]<span style="color:#f92672">=</span>le<span style="color:#f92672">.</span>fit_transform(cat_df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>])

cat_df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">pd<span style="color:#f92672">.</span>get_dummies(cat_df, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;EDUCATION&#39;</span>], prefix<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;edu&#39;</span>])

cat_df<span style="color:#f92672">.</span>head()
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>The first time I executed the <code>get_dummies</code> code it didn&rsquo;t do anything.</li>
<li>I had to add <code>cat_df=</code> before <code>pd.get_dummies</code> for the dummy variables to show up in the df.</li>
<li>I asked why I needed the <code>cat_df=</code> before get_dummies by not other things (e.g. df.head)? Mike said the reason is that without the assignment (<code>cat_df=</code>) at the beginning of the line, pandas doesn&rsquo;t assign the output of the get_dummies operation to anything, and so it isn&rsquo;t preserved. To put it differently, putting <code>cat_df=</code> at the front of the line does to same thing as adding an <code>inplace=True</code> parameter would do (Except the get_dummies function doesn&rsquo;t accept an <code>inplace=</code> parameter). (from Slack exchange on 1/4/2020)</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">cat_df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>get_dummies(cat_df, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;EDUCATION&#39;</span>], prefix<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;edu&#39;</span>])

cat_df<span style="color:#f92672">.</span>head()
</code></pre></div><h2 id="perform-transformations-on-original-df">Perform Transformations on Original df</h2>
<p>To avoid issues arising from having to merge 2 df, I am going to create a copy of the original df and transform the original non-numerical variables, instead of adding new variables to the df.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create a copy of the dataframe to retain transformations</span>
num_df<span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>copy()

<span style="color:#75715e"># use label encoder to change values in SEX into numbers</span>
num_df[<span style="color:#e6db74">&#39;SEX&#39;</span>]<span style="color:#f92672">=</span>le<span style="color:#f92672">.</span>fit_transform(num_df[<span style="color:#e6db74">&#39;SEX&#39;</span>])

num_df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># use label encoder to change values in DEFUALT into numbers</span>
num_df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>]<span style="color:#f92672">=</span>le<span style="color:#f92672">.</span>fit_transform(num_df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>])

<span style="color:#75715e">#use get.dummies function to transform EDU var into 4 dummy vars (1 var for each category)</span>
num_df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>get_dummies(num_df, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;EDUCATION&#39;</span>], prefix<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;edu&#39;</span>])

num_df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#use get.dummies function to transform MAR var into 4 dummy vars (1 var for each category)</span>
num_df<span style="color:#f92672">=</span>pd<span style="color:#f92672">.</span>get_dummies(num_df, columns<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;MARRIAGE&#39;</span>], prefix<span style="color:#f92672">=</span>[<span style="color:#e6db74">&#39;mar&#39;</span>])
<span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">The values in the MARRIAGE var were numerical to start. I had to transform it into 4 dummy variables
</span><span style="color:#e6db74">because I am going to use this data to train and test a regression ML model, and categorical vars are
</span><span style="color:#e6db74">treated as ordinal (i.e. the algo would treat/interpret category labeled 2 as the average of categories labeled 1 &amp; 3)
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#Export Numerical df</span>
num_df<span style="color:#f92672">.</span>to_csv(<span style="color:#e6db74">&#39;num_only_credit_one_data.csv&#39;</span>, index <span style="color:#f92672">=</span> False, header<span style="color:#f92672">=</span>True)
</code></pre></div><h3 id="additional-stuff">Additional Stuff</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#convert DEFUALT into numerical feature</span>
df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>] <span style="color:#f92672">=</span>df[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>]<span style="color:#f92672">.</span>astype(<span style="color:#e6db74">&#39;category&#39;</span>)<span style="color:#f92672">.</span>cat<span style="color:#f92672">.</span>codes
<span style="color:#e6db74">&#34;&#34;&#34;
</span><span style="color:#e6db74">I read that it is less memory intensive to convert non-numerical variables into numerical vars if the vars are
</span><span style="color:#e6db74">have the category data type instead of the obj dtype.
</span><span style="color:#e6db74">&#34;&#34;&#34;</span>

<span style="color:#75715e">#obtain correlation co-efficients for all features and bill_ap</span>
df[df<span style="color:#f92672">.</span>columns[<span style="color:#ae81ff">1</span>:]]<span style="color:#f92672">.</span>corr()[<span style="color:#e6db74">&#39;bill_ap&#39;</span>][:]

<span style="color:#75715e">#filter df to exclude cases where bill_ap value is 0, then print last 20 cases in df</span>
df<span style="color:#f92672">.</span>loc[df<span style="color:#f92672">.</span>bill_ap <span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>]<span style="color:#f92672">.</span>tail(<span style="color:#ae81ff">20</span>)

<span style="color:#75715e">#filter the df to return only the rows where the april bill var is not 0</span>
nzbill<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#39;bill_ap&#39;</span>] <span style="color:#f92672">!=</span><span style="color:#ae81ff">0</span>]

<span style="color:#75715e"># filter the data to return only rows where june bill var is greater than 0</span>
nzbill2<span style="color:#f92672">=</span>df[<span style="color:#e6db74">&#39;bill_ju&#39;</span>]<span style="color:#f92672">.</span>loc[<span style="color:#66d9ef">lambda</span> x: x <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>]

nzbill2<span style="color:#f92672">.</span>head(<span style="color:#ae81ff">20</span>)
<span style="color:#f92672">---</span>
    <span style="color:#ae81ff">1</span>       <span style="color:#ae81ff">3272</span>
    <span style="color:#ae81ff">2</span>      <span style="color:#ae81ff">14331</span>
    <span style="color:#ae81ff">3</span>      <span style="color:#ae81ff">28314</span>
    <span style="color:#ae81ff">4</span>      <span style="color:#ae81ff">20940</span>
    <span style="color:#ae81ff">5</span>      <span style="color:#ae81ff">19394</span>
    <span style="color:#ae81ff">6</span>     <span style="color:#ae81ff">542653</span>
    <span style="color:#ae81ff">7</span>        <span style="color:#ae81ff">221</span>
    <span style="color:#ae81ff">8</span>      <span style="color:#ae81ff">12211</span>
    <span style="color:#ae81ff">10</span>      <span style="color:#ae81ff">2513</span>
    <span style="color:#ae81ff">11</span>      <span style="color:#ae81ff">8517</span>
    <span style="color:#ae81ff">12</span>      <span style="color:#ae81ff">6500</span>
    <span style="color:#ae81ff">13</span>     <span style="color:#ae81ff">66782</span>
    <span style="color:#ae81ff">14</span>     <span style="color:#ae81ff">59696</span>
    <span style="color:#ae81ff">15</span>     <span style="color:#ae81ff">28771</span>
    <span style="color:#ae81ff">16</span>     <span style="color:#ae81ff">18338</span>
    <span style="color:#ae81ff">17</span>     <span style="color:#ae81ff">70074</span>
    <span style="color:#ae81ff">20</span>     <span style="color:#ae81ff">20616</span>
    <span style="color:#ae81ff">22</span>     <span style="color:#ae81ff">44006</span>
    <span style="color:#ae81ff">23</span>       <span style="color:#ae81ff">560</span>
    <span style="color:#ae81ff">24</span>      <span style="color:#ae81ff">5398</span>
    Name: bill_ju, dtype: int64
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter data to return only rows where the april AND june bill vars are not zero</span>
nzbill3<span style="color:#f92672">=</span>df<span style="color:#f92672">.</span>query(<span style="color:#e6db74">&#39;bill_ap !=0 &amp; bill_ju !=0&#39;</span>)
nzbill3<span style="color:#f92672">.</span>shape
<span style="color:#f92672">---</span>
    (<span style="color:#ae81ff">25140</span>, <span style="color:#ae81ff">25</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>You can filter data using the <code>df.query()</code> function with string statements composed of var names and boolean operators.</li>
<li>The first time I ran <code>nzbill3.shape()</code> it didn&rsquo;t work because I ended it with (). <code>.shape</code> is not a function that you want to perform on the data. It&rsquo;s more like asking for some kind of description of the data. That&rsquo;s why it shouldn&rsquo;t have parentheses at the end.</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#get the corr between the filtered data and DEFAULT</span>
nzbill3[nzbill3<span style="color:#f92672">.</span>columns[<span style="color:#ae81ff">1</span>:]]<span style="color:#f92672">.</span>corr()[<span style="color:#e6db74">&#39;DEFAULT&#39;</span>][:]
<span style="color:#f92672">---</span>

    MARRIAGE     <span style="color:#ae81ff">0.024541</span>
    AGE         <span style="color:#f92672">-</span><span style="color:#ae81ff">0.006730</span>
    LIMIT_BAL    <span style="color:#ae81ff">0.178940</span>
    bill_ap      <span style="color:#ae81ff">0.002718</span>
    bill_m       <span style="color:#ae81ff">0.003591</span>
    bill_ju      <span style="color:#ae81ff">0.008230</span>
    bill_jy      <span style="color:#ae81ff">0.011548</span>
    bill_ag      <span style="color:#ae81ff">0.010313</span>
    bill_s       <span style="color:#ae81ff">0.015756</span>
    pmt_ap       <span style="color:#ae81ff">0.053151</span>
    pmt_m        <span style="color:#ae81ff">0.058686</span>
    pmt_ju       <span style="color:#ae81ff">0.058949</span>
    pmt_jy       <span style="color:#ae81ff">0.059988</span>
    pmt_ag       <span style="color:#ae81ff">0.060119</span>
    pmt_s        <span style="color:#ae81ff">0.074500</span>
    pay_ap      <span style="color:#f92672">-</span><span style="color:#ae81ff">0.252730</span>
    pay_m       <span style="color:#f92672">-</span><span style="color:#ae81ff">0.269089</span>
    pay_ju      <span style="color:#f92672">-</span><span style="color:#ae81ff">0.276352</span>
    pay_jy      <span style="color:#f92672">-</span><span style="color:#ae81ff">0.291087</span>
    pay_ag      <span style="color:#f92672">-</span><span style="color:#ae81ff">0.316754</span>
    pay_s       <span style="color:#f92672">-</span><span style="color:#ae81ff">0.363338</span>
    DEFAULT      <span style="color:#ae81ff">1.000000</span>
    Name: DEFAULT, dtype: float64
</code></pre></div><blockquote>
<p><em>Notes</em></p>
<ul>
<li>Because I am concerned that the high percentage of 0 values in the billing variables is negatively impacting the analysis, I wanted to see if the correlations with DEFAULT would improve if I excluded the data where one or more of the billing vars has a value of 0.</li>
<li>However, it occured to me after getting the above .corr and thinking about the math behind correlation that excluding the cases with 0 values wouldn&rsquo;t impact the co-efficients.</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the data to return only rows where the April bill var is less than 100,000</span>
df<span style="color:#f92672">.</span>loc[df[<span style="color:#e6db74">&#39;bill_ap&#39;</span>]<span style="color:#f92672">&lt;=</span> <span style="color:#f92672">-</span><span style="color:#ae81ff">100000</span>]

<span style="color:#75715e">#get number of columens and rows</span>
nzbill3<span style="color:#f92672">.</span>shape
<span style="color:#f92672">---</span>
    (<span style="color:#ae81ff">25140</span>, <span style="color:#ae81ff">25</span>)
</code></pre></div><h1 id="modeling">Modeling</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">import</span> pandas <span style="color:#f92672">as</span> pd
<span style="color:#f92672">import</span> numpy <span style="color:#f92672">as</span> np
<span style="color:#f92672">import</span> matplotlib.pyplot <span style="color:#f92672">as</span> plt
<span style="color:#75715e">#the inline magic line is needed to make some data visualizations come out right when you are using jupyter notebooks</span>
<span style="color:#f92672">%</span>matplotlib inline
<span style="color:#f92672">import</span> seaborn <span style="color:#f92672">as</span> sns

<span style="color:#f92672">from</span> math <span style="color:#f92672">import</span> sqrt
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#ML algorithms (estimators)</span>
<span style="color:#f92672">from</span> sklearn.ensemble <span style="color:#f92672">import</span> RandomForestRegressor
<span style="color:#f92672">from</span> sklearn.linear_model <span style="color:#f92672">import</span> LinearRegression
<span style="color:#f92672">from</span> sklearn.svm <span style="color:#f92672">import</span> SVR
<span style="color:#f92672">from</span> sklearn <span style="color:#f92672">import</span> linear_model

<span style="color:#75715e">#model metrics</span>
<span style="color:#f92672">from</span> sklearn.metrics <span style="color:#f92672">import</span> mean_squared_error
<span style="color:#f92672">from</span> sklearn.metrics <span style="color:#f92672">import</span> r2_score
<span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> cross_val_score

<span style="color:#75715e">#cross validation</span>
<span style="color:#f92672">from</span> sklearn.model_selection <span style="color:#f92672">import</span> train_test_split
</code></pre></div><h2 id="import--verify-data">Import &amp; Verify Data</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#import numerical only data</span>
df<span style="color:#f92672">=</span> pd<span style="color:#f92672">.</span>read_csv(<span style="color:#e6db74">&#39;num_only_credit_one_data.csv&#39;</span>)

df<span style="color:#f92672">.</span>head()
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>shape
<span style="color:#f92672">---</span>
    (<span style="color:#ae81ff">30000</span>, <span style="color:#ae81ff">31</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">df<span style="color:#f92672">.</span>info()
</code></pre></div><pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;
RangeIndex: 30000 entries, 0 to 29999
Data columns (total 31 columns):
 #   Column               Non-Null Count  Dtype
---  ------               --------------  -----
 0   ID                   30000 non-null  int64
 1   SEX                  30000 non-null  int64
 2   AGE                  30000 non-null  int64
 3   LIMIT_BAL            30000 non-null  int64
 4   bill_ap              30000 non-null  int64
 5   bill_m               30000 non-null  int64
 6   bill_ju              30000 non-null  int64
 7   bill_jy              30000 non-null  int64
 8   bill_ag              30000 non-null  int64
 9   bill_s               30000 non-null  int64
 10  pmt_ap               30000 non-null  int64
 11  pmt_m                30000 non-null  int64
 12  pmt_ju               30000 non-null  int64
 13  pmt_jy               30000 non-null  int64
 14  pmt_ag               30000 non-null  int64
 15  pmt_s                30000 non-null  int64
 16  pay_ap               30000 non-null  int64
 17  pay_m                30000 non-null  int64
 18  pay_ju               30000 non-null  int64
 19  pay_jy               30000 non-null  int64
 20  pay_ag               30000 non-null  int64
 21  pay_s                30000 non-null  int64
 22  DEFAULT              30000 non-null  int64
 23  edu_graduate school  30000 non-null  int64
 24  edu_high school      30000 non-null  int64
 25  edu_other            30000 non-null  int64
 26  edu_university       30000 non-null  int64
 27  mar_0                30000 non-null  int64
 28  mar_1                30000 non-null  int64
 29  mar_2                30000 non-null  int64
 30  mar_3                30000 non-null  int64
dtypes: int64(31)
memory usage: 7.1 MB
</code></pre>
<p>Everything with my dataset looks as I expect. So I will move on to specifying the variables I was to use as features (IVs) and the one I want to use as target for my model predicting credit limit.</p>
<h1 id="predicting-customer-credit-limits">Predicting Customer Credit Limits</h1>
<p>In this notebook I am only going to create and test models that attempt to predict customer credit limits. Which means the target variable in all models will be &lsquo;limit&rsquo; (i.e. limit_bal).</p>
<h4 id="re-ordering-df-columns">Re-ordering df Columns</h4>
<p>To make things easier, before doing anything I&rsquo;m going to move LIMIT_BAL to the last column in my df and rename it.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#step 1: create a variabled to hold the LIMIT_BAL var</span>
lim<span style="color:#f92672">=</span>df[<span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>]

<span style="color:#75715e">#step 2: drop the LIMIT_BAL column</span>
df<span style="color:#f92672">.</span>drop(labels<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;LIMIT_BAL&#39;</span>, axis<span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>, inplace<span style="color:#f92672">=</span>True)

<span style="color:#75715e">#step 3: insert &#39;lim&#39; as last column of df</span>
df<span style="color:#f92672">.</span>insert(loc<span style="color:#f92672">=</span><span style="color:#ae81ff">30</span>, column<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;limit&#39;</span>, value<span style="color:#f92672">=</span>lim)

df<span style="color:#f92672">.</span>head()
</code></pre></div><h3 id="specify-the-target-variable">Specify the Target Variable</h3>
<p>Now I will specify the dependent or target variable for models attempting to predict customer credit limits.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the data to return my dependent var (the limit column)</span>
y <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>loc[:,<span style="color:#e6db74">&#39;limit&#39;</span>]

<span style="color:#75715e">#verify that the first 5 values in y match the values in the limit column above</span>
y<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>0     20000
1    120000
2     90000
3     50000
4     50000
Name: limit, dtype: int64
</code></pre>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#verify that y has 30,000 rows</span>
y<span style="color:#f92672">.</span>shape
</code></pre></div><pre><code>(30000,)
</code></pre>
<h1 id="model-1-predicting-credit-limit-using-all-variables">Model 1: Predicting Credit Limit Using All Variables</h1>
<p>None of the variables stood out as ones that should be included or excluded from the model, so in this first model I&rsquo;m going to include them all.</p>
<h3 id="specify-the-feature-variables">Specify the Feature Variables</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the data to return only columns for my feature vars</span>
X <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>iloc[:, <span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">30</span>]

<span style="color:#75715e">#verify that all but the ID and limit columns were selected</span>
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Summary of Feature Variables&#39;</span>)
X<span style="color:#f92672">.</span>head()
</code></pre></div><h2 id="train--test-model-1-using-3-different-regression-algorithms">Train &amp; Test Model 1 Using 3 Different Regression Algorithms</h2>
<p>Because credit limit is a continuous variable, I know I will have to use a regression model to predict it. But I don&rsquo;t have a principled reason to choose one regression algorithm over others, so I&rsquo;ll compare the predictions of models using Random Forest p9idifferent regression algorithms to find the one that works best on this task.</p>
<ul>
<li>I will run each model through a 3-fold cross validation test. Using R squared to score the models.</li>
<li>The model with the highest mean CV sore will be labeled best.</li>
</ul>
<h3 id="setup">Setup</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create a dictionary to hold the algos</span>
algosClass <span style="color:#f92672">=</span> [ ]

<span style="color:#75715e">#add the randomn forest regressor to the dictionary</span>
algosClass<span style="color:#f92672">.</span>append((<span style="color:#e6db74">&#39;Random Forest Regressor&#39;</span>,RandomForestRegressor()))

<span style="color:#75715e">#add the liner regression algo to the dictionary</span>
algosClass<span style="color:#f92672">.</span>append((<span style="color:#e6db74">&#39;Linear Regression&#39;</span>,LinearRegression()))

<span style="color:#75715e">#add the SV regressor to the dictionary</span>
algosClass<span style="color:#f92672">.</span>append((<span style="color:#e6db74">&#39;Support Vector Regression&#39;</span>,SVR()))

<span style="color:#75715e">#verify every algo was added to the list</span>
<span style="color:#66d9ef">print</span>(algosClass)
</code></pre></div><pre><code>[('Random Forest Regressor', RandomForestRegressor()), ('Linear Regression', LinearRegression()), ('Support Vector Regression', SVR())]
</code></pre>
<h3 id="train--test-models">Train &amp; Test Models</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create two empty lists to hold the names and cross validation results from each model</span>
results <span style="color:#f92672">=</span> []
names <span style="color:#f92672">=</span> []

<span style="color:#75715e">#create a for-loop that will</span>
<span style="color:#66d9ef">for</span> name, model <span style="color:#f92672">in</span> algosClass:
    result <span style="color:#f92672">=</span> cross_val_score(model, X,y, cv<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, scoring<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r2&#39;</span>)
    names<span style="color:#f92672">.</span>append(name)
    results<span style="color:#f92672">.</span>append(result)
</code></pre></div><h3 id="performance-results">Performance Results</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#run the for loop and print the mean cross validation score for each model</span>
<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(names)):
    <span style="color:#66d9ef">print</span>(names[i],results[i]<span style="color:#f92672">.</span>mean())
</code></pre></div><pre><code>Random Forest Regressor 0.46700202592747336
Linear Regression 0.35871695390197167
Support Vector Regression -0.05039128320492573
</code></pre>
<p>The model built using the random forest regressor performed somewhat less badly than the other two models. However, even the randomn forest model does little better than chance at predicting customer&rsquo;s credit limits (i.e.limit_bal).</p>
<h1 id="credit-limit-model-2-excluding-the-demographic-variables">Credit Limit Model 2: Excluding the Demographic Variables</h1>
<h2 id="select-the-feature-variables">Select the Feature Variables</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#filter the data to return only columns for bill amount, payment amount, payment history, and default var</span>
X2 <span style="color:#f92672">=</span> df<span style="color:#f92672">.</span>iloc[:, <span style="color:#ae81ff">3</span>:<span style="color:#ae81ff">22</span>]

<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#39;Summary of Model 2 Features&#39;</span>)
X2<span style="color:#f92672">.</span>head()
</code></pre></div><pre><code>Summary of Features for Model 2
</code></pre>
<!-- raw HTML omitted -->
<pre><code>.dataframe tbody tr th {
    vertical-align: top;
}

.dataframe thead th {
    text-align: right;
}
</code></pre>
<p><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#create two empty lists to hold the names and cross validation results from each model</span>
results2 <span style="color:#f92672">=</span> []
names2 <span style="color:#f92672">=</span> []

<span style="color:#75715e">#get cross validation scores for model 2</span>
<span style="color:#66d9ef">for</span> name, model <span style="color:#f92672">in</span> algosClass:
    result <span style="color:#f92672">=</span> cross_val_score(model, X2,y, cv<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>, scoring<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;r2&#39;</span>)
    names2<span style="color:#f92672">.</span>append(name)
    results2<span style="color:#f92672">.</span>append(result)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#run the for loop and print the mean cross validation score for each model</span>
<span style="color:#66d9ef">print</span>(<span style="color:#e6db74">&#34;Summary of Model2 Cross Validation Scores&#34;</span>)

<span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(len(names2)):
    <span style="color:#66d9ef">print</span>(names[i],results[i]<span style="color:#f92672">.</span>mean())
</code></pre></div><pre><code>Summary of Model2 Cross Validation Scores
Random Forest Regressor 0.46700202592747336
Linear Regression 0.35871695390197167
Support Vector Regression -0.05039128320492573
</code></pre>
<h2 id="train--test-the-model">Train &amp; Test the Model</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#instantiate the random forest regression algo</span>
<span style="color:#75715e"># rfr = RandomForestRegressor()</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e">#train the rfr model on X_train and y_train</span>
<span style="color:#75715e"># model = rfr.fit(X_train, y_train)</span>

<span style="color:#75715e">#use trained model to predict credit limit amounts for the X_test data</span>
<span style="color:#75715e"># y_predict = model_1.predict(X_test)</span>
</code></pre></div><pre><code>---------------------------------------------------------------------------

NameError                                 Traceback (most recent call last)

&lt;ipython-input-15-966390a2adc9&gt; in &lt;module&gt;
      1 #train the rfr model on X_train and y_train
----&gt; 2 model = rfr.fit(X_train, y_train)
      3
      4 #use trained model to predict credit limit amounts for the X_test data
      5 y_predict = model_1.predict(X_test)


NameError: name 'X_train' is not defined
</code></pre>
<h2 id="split-data-into-training-and-testing-sets">Split Data into Training and Testing Sets</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">X_train, X_test, y_train, y_test <span style="color:#f92672">=</span> train_test_split(X, y, test_size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0.2</span>, random_state<span style="color:#f92672">=</span><span style="color:#ae81ff">123</span>)
</code></pre></div><blockquote>
<p><em>Coding Notes</em></p>
<ul>
<li>The <code>test_size =</code> parameter specifies what percent of you dataset will be used for training and training. If you don&rsquo;t specify an amount, the default is 0.25.</li>
<li>The <code>random_state =</code> parameter can be set to any number. The purpose of it is to make sure that every time the model is run,  the same observations are used in the training and testing sets. If this parameter is not included, every time you run the model it may select a slightly different set of observations.</li>
</ul>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">cross_val_score(rfr, X, y, cv<span style="color:#f92672">=</span><span style="color:#ae81ff">3</span>)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">r2_score(y_test, y_predict)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">mean_squared_error(y_test, y_predict)
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">
</code></pre></div><p><a href="https://github.com/kpiatti/creditone-project">Link to GitHub Repository</a></p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://katherinepiatti.com" >
    &copy;  Home 2021 
  </a>
    <div>


<a href="https://stackoverflow.com/users/14364020/katherine" target="_blank" class="link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel="noopener" aria-label="follow on Stack Overflow——Opens in a new window">
  <svg height="32px" 
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    width="32px"
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






<a href="https://linkedin.com/kpiatti" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/kpiatti" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

  </body>
</html>
