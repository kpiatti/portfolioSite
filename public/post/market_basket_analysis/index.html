<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Market Basket Analysis | Home</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="What is market basket analysis? Market basket analysis (also known as affinity analysis) is specific implementation of association rule learning/mining&ndash;an unsupervised machine learning that seeks to uncover potentially valuable relationships (associations) between the items/products consumers buy from point of sale transaction data . For example, a grocery store might use market basket analysis to discover that 40% of the time when their customers buy cereal, they also buy bananas. Businesses used market basket analysis for things like:">
    <meta name="generator" content="Hugo 0.82.1" />
    
    
      <META NAME="ROBOTS" CONTENT="NOINDEX, NOFOLLOW">
    

    

  
  
    <link rel="stylesheet" href="https://katherinepiatti.com/ananke/dist/main.css_5c99d70a7725bacd4c701e995b969fea.css" >
  




    
      

    

    
    
    <meta property="og:title" content="Market Basket Analysis" />
<meta property="og:description" content="What is market basket analysis? Market basket analysis (also known as affinity analysis) is specific implementation of association rule learning/mining&ndash;an unsupervised machine learning that seeks to uncover potentially valuable relationships (associations) between the items/products consumers buy from point of sale transaction data . For example, a grocery store might use market basket analysis to discover that 40% of the time when their customers buy cereal, they also buy bananas. Businesses used market basket analysis for things like:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://katherinepiatti.com/post/market_basket_analysis/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2020-11-09T11:13:32-04:00" />
<meta property="article:modified_time" content="2020-11-09T11:13:32-04:00" /><meta property="og:site_name" content="Home" />

<meta itemprop="name" content="Market Basket Analysis">
<meta itemprop="description" content="What is market basket analysis? Market basket analysis (also known as affinity analysis) is specific implementation of association rule learning/mining&ndash;an unsupervised machine learning that seeks to uncover potentially valuable relationships (associations) between the items/products consumers buy from point of sale transaction data . For example, a grocery store might use market basket analysis to discover that 40% of the time when their customers buy cereal, they also buy bananas. Businesses used market basket analysis for things like:"><meta itemprop="datePublished" content="2020-11-09T11:13:32-04:00" />
<meta itemprop="dateModified" content="2020-11-09T11:13:32-04:00" />
<meta itemprop="wordCount" content="1540">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Market Basket Analysis"/>
<meta name="twitter:description" content="What is market basket analysis? Market basket analysis (also known as affinity analysis) is specific implementation of association rule learning/mining&ndash;an unsupervised machine learning that seeks to uncover potentially valuable relationships (associations) between the items/products consumers buy from point of sale transaction data . For example, a grocery store might use market basket analysis to discover that 40% of the time when their customers buy cereal, they also buy bananas. Businesses used market basket analysis for things like:"/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  
  
  <header class="cover bg-top" style="background-image: url('https://katherinepiatti.com/images/basket_feature.jpg');">
    <div class="pb3-m pb6-l bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="https://katherinepiatti.com/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        <img src="https://katherinepiatti.com/images/diamond2.gif" class="w100 mw5-ns" alt="Home" />
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/about/" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/post/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="https://katherinepiatti.com/resume_contact/" title="Resume | Contact page">
              Resume | Contact
            </a>
          </li>
          
        </ul>
      
      


<a href="https://stackoverflow.com/users/14364020/katherine" target="_blank" class="link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel="noopener" aria-label="follow on Stack Overflow——Opens in a new window">
  <svg height="32px" 
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    width="32px"
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






<a href="https://linkedin.com/kpiatti" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/kpiatti" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>








    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <h1 class="f2 f1-l fw2 white-90 mb0 lh-title">Market Basket Analysis</h1>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        PROJECTS
      </aside>
      




  <div id="sharing" class="mt3">

    
    <a href="https://www.facebook.com/sharer.php?u=https://katherinepiatti.com/post/market_basket_analysis/" class="facebook no-underline" aria-label="share on Facebook">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M28.765,50.32h6.744V33.998h4.499l0.596-5.624h-5.095  l0.007-2.816c0-1.466,0.14-2.253,2.244-2.253h2.812V17.68h-4.5c-5.405,0-7.307,2.729-7.307,7.317v3.377h-3.369v5.625h3.369V50.32z   M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;"/></svg>

    </a>

    
    
    <a href="https://twitter.com/share?url=https://katherinepiatti.com/post/market_basket_analysis/&amp;text=Market%20Basket%20Analysis" class="twitter no-underline" aria-label="share on Twitter">
      <svg height="32px"  style="enable-background:new 0 0 67 67;" version="1.1" viewBox="0 0 67 67" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M37.167,22.283c-2.619,0.953-4.274,3.411-4.086,6.101  l0.063,1.038l-1.048-0.127c-3.813-0.487-7.145-2.139-9.974-4.915l-1.383-1.377l-0.356,1.017c-0.754,2.267-0.272,4.661,1.299,6.271  c0.838,0.89,0.649,1.017-0.796,0.487c-0.503-0.169-0.943-0.296-0.985-0.233c-0.146,0.149,0.356,2.076,0.754,2.839  c0.545,1.06,1.655,2.097,2.871,2.712l1.027,0.487l-1.215,0.021c-1.173,0-1.215,0.021-1.089,0.467  c0.419,1.377,2.074,2.839,3.918,3.475l1.299,0.444l-1.131,0.678c-1.676,0.976-3.646,1.526-5.616,1.568  C19.775,43.256,19,43.341,19,43.405c0,0.211,2.557,1.397,4.044,1.864c4.463,1.377,9.765,0.783,13.746-1.568  c2.829-1.673,5.657-5,6.978-8.221c0.713-1.716,1.425-4.851,1.425-6.354c0-0.975,0.063-1.102,1.236-2.267  c0.692-0.678,1.341-1.419,1.467-1.631c0.21-0.403,0.188-0.403-0.88-0.043c-1.781,0.636-2.033,0.551-1.152-0.402  c0.649-0.678,1.425-1.907,1.425-2.267c0-0.063-0.314,0.042-0.671,0.233c-0.377,0.212-1.215,0.53-1.844,0.72l-1.131,0.361l-1.027-0.7  c-0.566-0.381-1.361-0.805-1.781-0.932C39.766,21.902,38.131,21.944,37.167,22.283z M33,64C16.432,64,3,50.569,3,34S16.432,4,33,4  s30,13.431,30,30S49.568,64,33,64z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/></svg>

    </a>

    
    <a href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://katherinepiatti.com/post/market_basket_analysis/&amp;title=Market%20Basket%20Analysis" class="linkedin no-underline" aria-label="share on LinkedIn">
      <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

    </a>
  </div>


      <h1 class="f1 athelas mt3 mb1">Market Basket Analysis</h1>
      
      
      <time class="f6 mv4 dib tracked" datetime="2020-11-09T11:13:32-04:00">November 9, 2020</time>

      
      
        <span class="f6 mv4 dib tracked"> - 8 minutes read</span>
        <span class="f6 mv4 dib tracked"> - 1540 words</span>
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><h2 id="what-is-market-basket-analysis">What is market basket analysis?</h2>
<p>Market basket analysis (also known as affinity analysis) is specific implementation of <em>association rule learning/mining</em>&ndash;an unsupervised machine learning that seeks to uncover potentially valuable relationships (associations) between the items/products consumers buy from point of sale <em>transaction data</em> . For example, a grocery store might use market basket analysis to discover that 40% of the time when their customers buy cereal, they also buy bananas. Businesses used market basket analysis for things like:</p>
<ul>
<li>Recommendation Engines (think Netflix&rsquo;s , TikTok, &amp; Youtube)</li>
<li>Marketing Promotions</li>
<li>Product Bundling</li>
<li>Targeted Advertisement</li>
<li>Product Placement</li>
</ul>
<p>The mining algorithm looks through retailer transaction data to find items/products that are frequently purchased together (<em>itemsets</em>) and then generates simple if/then association rules between them.</p>
<h3 id="association-rules">Association Rules</h3>
<p>Association rules are simple <em>if,then</em> rules containing itemsets on both the left hand side (lhs) and right hand side (rhs) like the examples below.
$$
{cereal} \rightarrow {milk, bananas} \<br>
{ketchup, pickles} \rightarrow {mustard} \<br>
{\emptyset} \rightarrow {eggs}
$$
Itemsets don&rsquo;t need to have more than one item and itemsets on the lhs (only) can be empty. When a rule has a lhs that is the empty set, it is really just giving you information about the <em>independent</em> support, confidence, etc. for the itemset on the rhs.</p>
<p>Here&rsquo;s a more precise definition:</p>
<blockquote>
<p>&ldquo;Let D be the set of transactions represented in Table 10.1, where each transaction T in D represents a set of items contained in I. Suppose that we have a particular set of items A (e.g., beans and squash), and another set of items B (e.g., asparagus). Thenan association rule takes the form if A, then B (i.e., A ⇒ B), where the antecedent A and the consequent B are proper subsets of I, and A and B are mutually exclusive. This definition would exclude, for example, trivial rules such as if beans and squash, then beans.&rdquo; (Larose, 2005)</p>
</blockquote>
<p>One of the biggest challenges in finding strong/interesting association rules is the size of the search space&ndash;the number of possible association rules. With only 100 products, there are $6.4 * 10^{31}$</p>
<h3 id="rule-metrics">Rule Metrics</h3>
<p>Every item/product a retailer sells, along with every possible combination of those products is the basis of a potential association rule. But the purpose of market basket analysis is to find valuable association rules that can be used to drive marketing and other business decisions. The three most important metrics are: <em>support</em>, <em>confidence</em>, and <em>lift</em>.</p>
<h4 id="support">Support</h4>
<p>Support is a measure of how frequently an itemset appears in the transaction dataset. In other words, the proportion of transactions that contain the itemset.</p>
<p>Suppose we have a dataset that contains only the following transactions:</p>
<ul>
<li>Transaction 1: bananas were purchased</li>
<li>Transaction 2: milk was purchased</li>
<li>Transaction 3: cereal was purchased</li>
<li>Transaction 4: bananas and milk were purchased</li>
<li>Transaction 5: bananas were purchased</li>
</ul>
<p>The support for itemset {bananas} is $2/5 = 0.4$</p>
<p>The support for itemset {bananas, milk} is $1/5 = 0.2$</p>
<h4 id="confidence">Confidence</h4>
<p>Confidence is a measure of how often an association rule is true. That is, how often it is the case that when the itemset on the lhs was purchased, the itemset on the rhs was also purchased (in the same transaction).
$$
\underline{Support{ lhs } + Support{ rhs }} \ Support{lhs}
$$
Confidence can also be understood as a conditional probability of the rhs itemset appearing in a transaction given that the lhs itemset appears in the transaction. $$Pr({rhs}|{lhs})$$.</p>
<h4 id="lift">Lift</h4>
<p>Lift is $$\underline{Support{ lhs } + Support{ rhs }} \ Support{lhs} * Support{rhs}
$$
Unlike confidence, the value of lift is the same regardless of whether the rhs or lhs comes first.</p>
<h1 id="example--electronidex">Example : Electronidex</h1>
<p>Electronidex is a online electronics retailer selling desktops, laptops, computer accessories, and other electronics products. We have a dataset containing 30 days of online transactions from 2017. I use the <code>apriori()</code> function from the arules package to mine for association rules.</p>
<pre><code class="language-{r" data-lang="{r"># load standard pkgs
library(tidyverse)
library(here)
library(kableExtra)

# load pkgs for market basket analysis
library(arules)
library(arulesViz)
</code></pre><p>The raw Electronidex data contains rows that each represent a single online transaction from a 30 day period in 2017. The columns each contain one item/product the customer purchased in that transaction. Thus if a customer only purchased on item, the row representing that transaction will contain only one column with the name of the product they purchased. Here is a snippet of what the data looks like when opened in Excel.</p>
<figure>
    <img src="https://katherinepiatti.com/images/snip_raw_electronidex_data1.png"/> 
</figure>

<p>For the mining algorithm to work, the above raw data needs to be transformed into a <em>sparse matrix</em>  (also called basket format), where each column represents one item/product the company sells and the items purchased in each transaction are represented as ones.</p>
<pre><code class="language-{r" data-lang="{r">transactions_matrix &lt;- as(transactions, 'matrix')

transaction_df &lt;- as.data.frame(transactions_matrix)

transactions_num_df &lt;- 1 * transaction_df
</code></pre><p>Here&rsquo;s a snip of what the data in a sparse matrix would look like if it were transformed into a dataframe. Each row represents a transaction and each column represents one item/product the company sells. The item(s) purchased in each tranaction are recorded as 1s in the appropriate columns.</p>
<figure>
    <img src="https://katherinepiatti.com/images/snip_trandformed_eletronidex_data1.png"/> 
</figure>

<p>However, you can avoid transforming the raw transaction data by loading it into R using the <strong>read.transactions()</strong> function from the arules package instead of read.csv().</p>
<pre><code class="language-{r" data-lang="{r">transactions &lt;- read.transactions(
  here('Data', 'ElectronidexTransactions2017.csv'),
  format = 'basket',
  sep = ',',
  rm.duplicates = TRUE)
</code></pre><pre><code class="language-{r}" data-lang="{r}"># verify import
transactions
</code></pre><h2 id="summarize-data">Summarize Data</h2>
<p>Let&rsquo;s get a summary of what&rsquo;s in the data.</p>
<pre><code class="language-{r}" data-lang="{r}">summary(transactions)
</code></pre><p>From the output, we can ascertain that there are 9,835 rows (transactions) and 125 items that could potentially appear in association rules. We can also see the 5 most frequently purchased items are iMac, HP Laptops, CYBERPOWER Gamer
Desktops, Apple Earpods, and Apple MacBook Airs. Lastly, we can see that most transactions are for between 1 and 4 items.</p>
<p>To get a visual representation of the most frequently purchased items, we can use use the itemFrequencyPlot() function from arules.</p>
<pre><code class="language-{r}" data-lang="{r}"># plot 10 most frequent items
itemFrequencyPlot(transactions,
                  topN = 10,
                  type = 'absolute',
                  cex.names = 0.8) #reduces label size
</code></pre><h3 id="inspect-tractions">Inspect Tractions</h3>
<p>To look at the items purchased particular transactions, e.g. large transactions with 22+ items, we can use the inspect() and size() functions from the arules package.</p>
<pre><code class="language-{r," data-lang="{r,"># to change long outputs scrolling, add mat.height='100px' to code chunk
options(width = 60)
local({
  hook_output &lt;- knitr::knit_hooks$get('output')
  knitr::knit_hooks$set(output = function(x, options) {
    if (!is.null(options$max.height)) options$attr.output &lt;- c(
      options$attr.output,
      sprintf('style=&quot;max-height: %s;&quot;', options$max.height)
    )
    hook_output(x, options)
  })
})
</code></pre><pre><code class="language-{r," data-lang="{r,">inspect(transactions[size(transactions) &gt;= 25])
</code></pre><h2 id="generate-association-rules">Generate Association Rules</h2>
<p>To mine the data for association rules using arules, you can use the <code>apriori()</code> function, and</p>
<pre><code class="language-{r}" data-lang="{r}"># find all potentially valuable association rules
ruleset_01 &lt;- transactions %&gt;%
  apriori()
</code></pre><p>If you don&rsquo;t get any rules (as in the example above) that may be because the default support and confidence parameters, which are 0.1 and 0.8 respectively, are too high.</p>
<p>To change the default settings, add a <code>parameter =</code> argument to your <code>apriori()</code> function and specify lower values for <code>supp</code>, <code>conf</code>, and/or other parameters. Note: if you want to change 2 or more parameters embed them in a <code>list()</code>.</p>
<pre><code class="language-{r}" data-lang="{r}">ruleset_01 &lt;- transactions %&gt;%
  apriori(parameter = list(supp = 0.02, conf = 0.25))
</code></pre><h3 id="summarize-and-inspect-rules">Summarize and Inspect Rules</h3>
<p>Use the <code>summary()</code> function to get more information.</p>
<pre><code class="language-{r}" data-lang="{r}">summary(ruleset_01)
</code></pre><p>This tells us that the majority of the rules generated (46) contain 2 items, and we also get summary statistics on the rule metrics, along with coverage and count.</p>
<p>Here&rsquo;s the defintion of coverage from rdrr.io:</p>
<blockquote>
<p>&ldquo;Coverage (also called cover or LHS-support) is the support of the left-hand-side of the rule, i.e., supp(X). It represents a measure of to how often the rule can be applied.&rdquo;</p>
</blockquote>
<p>When it comes to a single rule, count is simply the number of times the itemsets in the rule appear in the dataset. The summary statistics are just telling you about the range and variation for count among the 388 rules generated.</p>
<p>To look at a subset of rules generated, we can pipe the ruleset into the <code>head()</code> function and then <code>inspect()</code>. (Note: the <code>kbl()</code> and <code>kable_paper()</code> functions at the end of the pipeline are part of the kableExtra package and just used to turn the standard console output into a more readable table. They are not necessary.)</p>
<pre><code class="language-{r}" data-lang="{r}">ruleset_01 %&gt;%
  head(n = 10) %&gt;%
  inspect() %&gt;%
  kbl() %&gt;%
  kable_paper('striped', 'condensed')
</code></pre><p>The first rule has an empty lhs itemsets. As mentioned earlier, these rules are about transactions where just the item(s) on the rhs were purchased. To avoid rules with an empty antecedent (lhs) add  <code>minlen = 2</code> to the <code>parameter = list()</code> in the <code>apriori()</code> function.</p>
<h3 id="sort-rules">Sort Rules</h3>
<p>To sort the rules by a paricular metric, e.g. confidence, we just need to add a <code>sort()</code> function into our pipeline.</p>
<pre><code class="language-{r}" data-lang="{r}">ruleset_01 %&gt;%
  head(n = 10) %&gt;%
  sort(by = 'confidence') %&gt;%
  inspect() %&gt;%
  kbl() %&gt;%
  kable_paper('striped', 'condensed')
</code></pre><h3 id="redundant-rules">Redundant Rules</h3>
<p>To find out if any of the rules generated are redundant run the <code>is.redundant()</code> function on your ruleset.</p>
<pre><code class="language-{r}" data-lang="{r}">is.redundant(ruleset_01)
</code></pre><h2 id="vizualize-rules">Vizualize Rules</h2>
<p>The <code>arulesViz</code> package enables easy creation of both static and interactive visualizations of association</p>
<p>By selecting a item/product from the &ldquo;Select by Id&rdquo; menu, users can highlight the rules that are connected to that item/product.</p>
<pre><code class="language-{r}" data-lang="{r}">plot(ruleset_01,
     method = &quot;graph&quot;,
     engine = &quot;htmlwidget&quot;
     )
</code></pre><p>For example, if you select &lsquo;Dell Laptop&rsquo;, you can see that the idem only features in one rule. (use your mouse scroll wheel to read the labels on the graph nodes).</p>
<p><a href="https://github.com/kpiatti/market-basket-analysis">Link to Project GitHub Repository</a></p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="https://katherinepiatti.com" >
    &copy;  Home 2021 
  </a>
    <div>


<a href="https://stackoverflow.com/users/14364020/katherine" target="_blank" class="link-transition stackoverflow link dib z-999 pt3 pt0-l mr1" title="Stack Overflow link" rel="noopener" aria-label="follow on Stack Overflow——Opens in a new window">
  <svg height="32px" 
    style="enable-background:new 0 0 67 67;"
    xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 24 24"
    width="32px"
>
    <path d="M12 0c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12zm.869 5.903l3.114 4.567-.975.665-3.115-4.567.976-.665zm-2.812 2.585l4.84 2.838-.6 1.017-4.842-2.838.602-1.017zm-1.276 2.724l5.413 1.521-.291 1.077-5.428-1.458.306-1.14zm-.588 2.461l5.687.569-.103 1.12-5.691-.513.107-1.176zm-.169 2.16h5.835v1.167h-5.835v-1.167zm7.976 3.167h-10v-6h1v5h8v-5h1v6zm.195-8.602l-.945-5.446 1.162-.202.947 5.446-1.164.202z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>






<a href="https://linkedin.com/kpiatti" target="_blank" class="link-transition linkedin link dib z-999 pt3 pt0-l mr1" title="LinkedIn link" rel="noopener" aria-label="follow on LinkedIn——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 65 65;" version="1.1" viewBox="0 0 65 65" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
  <path d="M50.837,48.137V36.425c0-6.275-3.35-9.195-7.816-9.195  c-3.604,0-5.219,1.983-6.119,3.374V27.71h-6.79c0.09,1.917,0,20.427,0,20.427h6.79V36.729c0-0.609,0.044-1.219,0.224-1.655  c0.49-1.22,1.607-2.483,3.482-2.483c2.458,0,3.44,1.873,3.44,4.618v10.929H50.837z M22.959,24.922c2.367,0,3.842-1.57,3.842-3.531  c-0.044-2.003-1.475-3.528-3.797-3.528s-3.841,1.524-3.841,3.528c0,1.961,1.474,3.531,3.753,3.531H22.959z M34,64  C17.432,64,4,50.568,4,34C4,17.431,17.432,4,34,4s30,13.431,30,30C64,50.568,50.568,64,34,64z M26.354,48.137V27.71h-6.789v20.427  H26.354z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>


<a href="https://github.com/kpiatti" target="_blank" class="link-transition github link dib z-999 pt3 pt0-l mr1" title="Github link" rel="noopener" aria-label="follow on Github——Opens in a new window">
  <svg  height="32px"  style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="32px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
  <path d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"/>
</svg>

<span class="new-window"><svg  height="8px"  style="enable-background:new 0 0 1000 1000;" version="1.1" viewBox="0 0 1000 1000" width="8px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" >
<path d="M598 128h298v298h-86v-152l-418 418-60-60 418-418h-152v-86zM810 810v-298h86v298c0 46-40 86-86 86h-596c-48 0-86-40-86-86v-596c0-46 38-86 86-86h298v86h-298v596h596z" style="fill-rule:evenodd;clip-rule:evenodd;fill:;"/>
</svg>
</span></a>







</div>
  </div>
</footer>

  </body>
</html>
